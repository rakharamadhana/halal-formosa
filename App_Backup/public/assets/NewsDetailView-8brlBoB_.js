import{d as a,r as e,a9 as t,a2 as s,a3 as l,a4 as n,a5 as i,o,bm as r,s as d,ac as u,c,w as v,u as m,b as p,e as w,O as h,j as f,k as g,bb as y,ad as _,S as x,i as k,L as b,t as j,bi as z,bj as L,l as N,aJ as T,y as A}from"./index-D9IhqqAc.js";import"./html5-qrcode-D_4nuB1t.js";const D={key:0,id:"ad-space-news-detail",style:{height:"65px"}},U={key:0,class:"ion-text-center"},q={key:1},H=["src"],M={class:"ion-padding",style:{"padding-top":"0"}},S={style:{margin:"4px 0 8px 0","font-size":"13px"}},B=["innerHTML"],J={class:"ion-text-end ion-margin-top",style:{color:"var(--ion-color-shade)","font-size":"0.8rem"}},O={key:2,class:"ion-text-center ion-margin-top"},P=a({__name:"NewsDetailView",setup(a){const P=e(null),V=r(),C=e(null),E=e(!0),F=e(t.isNativePlatform());return s.extend(l),s.extend(n),s.extend(i),o(async()=>{const a=V.params.id,{data:e}=await d.auth.getUser();P.value=e.user;const{data:t,error:s}=await d.from("news").select("*").eq("id",a).single();!s&&t&&(C.value=t),E.value=!1,await u(),setTimeout(()=>{var a;return null==(a=window.scheduleBannerUpdate)?void 0:a.call(window)},50)}),(a,e)=>(p(),c(m(A),null,{default:v(()=>[w(m(h),null,{default:v(()=>[F.value&&!m(y)?(p(),f("div",D)):g("",!0),w(_,{title:"","show-back":"","back-route":"/news",icon:"none"})]),_:1}),w(m(x),null,{default:v(()=>{var a,e;return[E.value?(p(),f("div",U)):C.value?(p(),f("div",q,[C.value.header_image?(p(),f("img",{key:0,src:C.value.header_image,class:b(["news-header-img",{"has-ad":F.value&&!m(y)}]),alt:"header-image"},null,10,H)):g("",!0),k("div",M,[k("h1",null,j(C.value.title),1),k("p",S," Added by "+j(C.value.author_name)+" - "+j((e=C.value.created_at,e?s.utc(e).tz("Asia/Taipei").fromNow():"")),1),k("div",{class:"article-content",innerHTML:C.value.content},null,8,B),k("p",J," Added by "+j(C.value.author_name||"Unknown")+" • "+j(new Date(C.value.created_at).toLocaleDateString()),1)])])):(p(),f("p",O," ❌ News not found. ")),C.value&&(null==(a=P.value)?void 0:a.id)===C.value.author_id?(p(),c(m(z),{key:3,vertical:"bottom",horizontal:"end",slot:"fixed"},{default:v(()=>[w(m(L),{color:"carrot","router-link":"/news/edit/".concat(C.value.id)},{default:v(()=>[w(m(N),{icon:m(T)},null,8,["icon"])]),_:1},8,["router-link"])]),_:1})):g("",!0)]}),_:1})]),_:1}))}});export{P as default};
