import{d as a,r as s,o as l,s as t,a as e,c as n,w as i,u as o,b as u,e as r,I as c,f as d,g as f,h as p,i as m,j as _,k as b,l as h,m as v,n as w,p as y,t as x,q as S,v as g,x as j,y as $,_ as k}from"./index-D9IhqqAc.js";import{u as q}from"./useDailyMissions-BrhXuVA9.js";import"./html5-qrcode-D_4nuB1t.js";const I={class:"tab-icon-wrapper"},M={key:0,class:"tab-dot"},A={class:"tab-icon-wrapper"},B={class:"tab-icon-wrapper"},C={class:"tab-icon-wrapper"},D=k(a({__name:"MainView",setup(a){const{claimedBonus:k,fetchProgress:D}=q(),P=s(!1),V=s(null);let Z=null;async function syncSession(a){var s,l,e;if(!a){a=(await t.auth.getSession()).data.session}P.value=!!a,V.value=null!=(e=null==(l=null==(s=null==a?void 0:a.user)?void 0:s.user_metadata)?void 0:l.avatar_url)?e:null,P.value&&D()}return l(async()=>{await syncSession();const{data:a}=t.auth.onAuthStateChange((a,s)=>{syncSession(s)});Z=a.subscription}),e(()=>{null==Z||Z.unsubscribe()}),(a,s)=>(u(),n(o($),null,{default:i(()=>[r(o(c),null,{default:i(()=>[r(o(d)),r(o(f),{slot:"bottom",id:"footer-tabs"},{default:i(()=>[r(o(p),{tab:"home",href:"/home"},{default:i(()=>[m("div",I,[r(o(h),{icon:o(v)},null,8,["icon"]),P.value&&!o(k)?(u(),_("div",M)):b("",!0)]),r(o(w),null,{default:i(()=>[y(x(a.$t("main.home")),1)]),_:1})]),_:1}),r(o(p),{tab:"search",href:"/search"},{default:i(()=>[m("div",A,[r(o(h),{icon:o(S)},null,8,["icon"])]),r(o(w),null,{default:i(()=>[y(x(a.$t("main.product")),1)]),_:1})]),_:1}),r(o(p),{tab:"explore",href:"/explore"},{default:i(()=>[m("div",B,[r(o(h),{icon:o(g)},null,8,["icon"])]),r(o(w),null,{default:i(()=>[y(x(a.$t("main.explore")),1)]),_:1})]),_:1}),r(o(p),{tab:"trip",href:"/trip"},{default:i(()=>[m("div",C,[r(o(h),{icon:o(j)},null,8,["icon"])]),r(o(w),null,{default:i(()=>[y(x(a.$t("main.trip")),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}}),[["__scopeId","data-v-dcbfa481"]]);export{D as default};
