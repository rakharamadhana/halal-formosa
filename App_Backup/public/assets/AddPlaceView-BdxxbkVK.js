import{d as e,a6 as a,bm as l,r as t,a7 as n,o,s as i,a as u,c as r,w as s,u as d,bx as c,a9 as m,ab as v,B as p,b as g,e as f,O as _,P as b,R as h,b1 as y,Q as w,p as P,t as k,S as V,j as U,D as L,N as I,aS as x,k as C,i as E,aj as j,by as A,ao as M,aq as S,H as T,J as D,ar as O,n as R,F as q,l as $,bz as z,bA as B,bB as F,L as W,W as H,b5 as N,ai as G,b6 as K,ba as Z,bC as J,y as Y,bD as Q,bE as X,bF as ee,am as ae,a8 as le,_ as te}from"./index-D9IhqqAc.js";import{u as ne}from"./useNotifier-BmoHZOF2.js";import"./html5-qrcode-D_4nuB1t.js";const oe={slot:"label"},ie={slot:"label"},ue={key:0,class:"img-preview-wrap"},re=["src"],se={slot:"label"},de={class:"row-2"},ce={slot:"label"},me={slot:"label"},ve={class:"map-wrap"},pe={class:"hint"},ge={class:"map-holder"},fe={style:{margin:"6px 0 0 16px",padding:"0","font-size":"14px"}},_e={key:2},be={key:0,class:"closed-label"},he={key:1,class:"time-inputs"},ye={key:1},we=5242880,Pe=te(e({__name:"AddPlaceView",setup(e){const te=l(),Pe=a(()=>!!te.params.id),ke=t(null),Ve=25.0343,Ue=121.5645;let Le=null,Ie=null;const xe=t(!0),Ce=t(!1),{awardAndCelebrate:Ee}=ae(),{notifyEvent:je}=ne(),Ae={mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},Me=t(!1),Se=t(!1),Te=p(),De=t(!1),Oe=t([]),isPrivileged=e=>"admin"===e||"contributor"===e,Re=t(null),qe=t({name:"",type_id:null,lat:Ve,lng:Ue,address:null,image:null,description:"",phone:"",instagram:"",line_id:"",price_range:"",opening_hours:{mon:{active:!1,open:"09:00",close:"18:00"},tue:{active:!1,open:"09:00",close:"18:00"},wed:{active:!1,open:"09:00",close:"18:00"},thu:{active:!1,open:"09:00",close:"18:00"},fri:{active:!1,open:"09:00",close:"18:00"},sat:{active:!1,open:"09:00",close:"18:00"},sun:{active:!1,open:"09:00",close:"18:00"}}}),$e=t(!1),ze=t({open:!1,message:"",color:"primary"}),Be=a(()=>!(!qe.value.name||!qe.value.type_id||null===qe.value.lat||null===qe.value.lng||!qe.value.image&&!Ke.value));async function resizeImageFromWebPath(e,a,l=1200,t=.8){const n=await fetch(e),o=await n.blob(),i=await(async()=>{try{return await createImageBitmap(o)}catch(e){return new Promise((e,a)=>{const l=new Image;l.onload=()=>{const t=document.createElement("canvas");t.width=l.naturalWidth,t.height=l.naturalHeight;t.getContext("2d").drawImage(l,0,0),t.toBlob(l=>{if(!l)return a(new Error("toBlob failed"));createImageBitmap(l).then(e).catch(a)})},l.onerror=a,l.src=URL.createObjectURL(o)})}})(),u=i.width,r=i.height,s=Math.min(1,l/Math.max(u,r)),d=Math.round(u*s),c=Math.round(r*s),m=document.createElement("canvas");m.width=d,m.height=c;m.getContext("2d").drawImage(i,0,0,d,c);const v=await new Promise((e,a)=>m.toBlob(l=>l?e(l):a(new Error("Compression failed")),"image/jpeg",t));return new File([v],a,{type:"image/jpeg"})}const Fe=t([]),We=t(!1);let He;n(()=>({name:qe.value.name,lat:qe.value.lat,lng:qe.value.lng}),e=>{clearTimeout(He),He=window.setTimeout(async()=>{const{name:a,lat:l,lng:t}=e;if(!a||!l||!t||a.trim().length<4)return void(Fe.value=[]);We.value=!0;const{data:n,error:o}=await i.rpc("find_nearby_similar_locations",{p_lat:l,p_lng:t,p_name:a.trim(),p_exclude_id:Pe.value?Number(te.params.id):null});Fe.value=!o&&Array.isArray(n)?n:[],We.value=!1},600)},{deep:!1});const Ne=a(()=>{if(!Fe.value.length)return null;const e=Fe.value[0];return e.distance_meters<=20&&e.name_similarity>=.75?"high":e.distance_meters<=50&&e.name_similarity>=.6?"medium":"low"}),makeSafeBase=()=>{var e;const a=null==(e=qe.value.name)?void 0:e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-_]/g,"").toLowerCase();return a&&a.length?a:"place"},Ge=t(null),Ke=t(null),Ze=t(!1),setPreview=e=>{Ge.value&&URL.revokeObjectURL(Ge.value),Ge.value=URL.createObjectURL(e),Ke.value=e},takePicture=async()=>{try{const a=await Q.getPhoto({resultType:ee.Uri,source:X.Camera,quality:85,allowEditing:!1});if(!a.webPath)return;const l=makeSafeBase();try{const e=await resizeImageFromWebPath(a.webPath,"image-".concat(l,".jpg"),1200,.8);if(e.size>we)return void(ze.value={open:!0,message:"Image still too large after compression.",color:"danger"});setPreview(e)}catch(e){ze.value={open:!0,message:(null==e?void 0:e.message)||"Could not process image.",color:"danger"}}}catch(e){}},uploadFromGallery=async()=>{try{const e=await Q.getPhoto({resultType:ee.Uri,source:X.Photos,quality:85,allowEditing:!1});if(!e.webPath)return;const a=makeSafeBase(),l=await resizeImageFromWebPath(e.webPath,"image-".concat(a,".jpg"),1200,.8);if(l.size>we)return void(ze.value={open:!0,message:"Image still too large after compression.",color:"danger"});setPreview(l)}catch(e){}};let Je=null,Ye=null,Qe=null;let Xe=null;const updatePinColor=()=>{const e=getComputedStyle(document.documentElement).getPropertyValue("--ion-color-carrot").trim()||"#d8620d";Ie&&(null==Ye?void 0:Ye.PinElement)&&(Ie=new Ye.PinElement({background:e,borderColor:"#ffffff",glyphColor:"#ffffff",scale:1.2}),Le&&(Le.content=Ie.element))},ea=t(null),onAddressConfirm=async()=>{var e;const a=null==(e=qe.value.address)?void 0:e.trim();if(!a||a.length<8)return;ke.value="address";const l=await async function geocodeAddress(e){if(!Ce.value||!e)return null;ea.value||(ea.value=new google.maps.Geocoder);return new Promise(a=>{ea.value.geocode({address:e,region:"TW",componentRestrictions:{country:"TW"}},(e,l)=>{if("OK"===l&&(null==e?void 0:e[0])){const l=e[0].geometry.location;a({lat:l.lat(),lng:l.lng()})}else console.warn("Address geocode failed:",l),a(null)})})}(a);if(!l)return;const{lat:t,lng:n}=l;qe.value.lat=t,qe.value.lng=n,null==Je||Je.panTo({lat:t,lng:n}),null==Je||Je.setZoom(16),Le&&(Le.position={lat:t,lng:n}),ke.value=null};async function reverseGeocode(e,a){return Ce.value?(ea.value||(ea.value=new google.maps.Geocoder),new Promise(l=>{ea.value.geocode({location:{lat:e,lng:a}},(e,a)=>{"OK"===a&&(null==e?void 0:e[0])?l(e[0].formatted_address):(console.warn("Geocode failed:",a),l(null))})})):null}const normalizeOpeningHours=()=>{if(!Se.value)return null;const e=qe.value.opening_hours;return Object.values(e).some(e=>e.active&&e.open&&e.close)?e:null},submitPlace=async()=>{var e,a,l,t;if(!$e.value)if(qe.value.image||Ke.value){$e.value=!0;try{const{data:{user:n}}=await i.auth.getUser();if(!n)throw new Error("You must be logged in.");e=Re.value;const o=isPrivileged(Re.value);if(Pe.value&&Ke.value&&qe.value.image){const e=qe.value.image.split("/storage/v1/object/public/location-image/")[1];e&&await i.storage.from("location-image").remove([e])}Ke.value&&(qe.value.image=await(async e=>{Ze.value=!0;try{const{data:{user:a}}=await i.auth.getUser();if(!a)throw new Error("You must be logged in.");const l=makeSafeBase(),t=Math.random().toString(36).slice(2,8),n="".concat(a.id,"/").concat(l,"/").concat(Date.now(),"_").concat(t,".jpg"),{error:o}=await i.storage.from("location-image").upload(n,e,{cacheControl:"3600",upsert:!1,contentType:"image/jpeg"});if(o)throw o;const{data:u}=i.storage.from("location-image").getPublicUrl(n);if(!(null==u?void 0:u.publicUrl))throw new Error("Could not get public URL.");return u.publicUrl}finally{Ze.value=!1}})(Ke.value));const u={name:qe.value.name.trim(),lat:qe.value.lat,lng:qe.value.lng,type_id:qe.value.type_id,image:String(qe.value.image||"").trim(),address:(null==(a=qe.value.address)?void 0:a.trim())||null,description:(null==(l=qe.value.description)?void 0:l.trim())||null,phone:qe.value.phone||null,instagram:qe.value.instagram||null,line_id:qe.value.line_id||null,price_range:qe.value.price_range||null,opening_hours:normalizeOpeningHours(),created_by:n.id,approved:o,approved_by:o?n.id:null,approved_at:o?(new Date).toISOString():null,updated_by:n.id,updated_at:(new Date).toISOString()};if(Pe.value){o||(delete u.approved,delete u.approved_by,delete u.approved_at);const{error:e}=await i.from("locations").update(u).eq("id",te.params.id);if(e)throw e;return ze.value={open:!0,message:"Place updated!",color:"success"},void setTimeout(()=>Te.replace("/place/".concat(te.params.id)),500)}const{data:r,error:s}=await i.from("locations").insert([u]).select("id").single();if(s)throw s;if(ze.value={open:!0,message:o?"âœ… Place published!":"âœ… Place submitted and awaiting approval.",color:"success"},o){const e=Oe.value.find(e=>e.id===qe.value.type_id),a=(null==e?void 0:e.name)||"Halal Place";await je("new_place","ðŸ•Œ New ".concat(a," Added!"),"".concat(qe.value.name," (").concat(a,")\nLat: ").concat(qe.value.lat,", Lng: ").concat(qe.value.lng),null!=(t=qe.value.image)?t:void 0,{id:r.id,lat:qe.value.lat,lng:qe.value.lng,isNative:!0})}await Ee("add_place",1e4),await le.log("add_place_success",{name:qe.value.name,address:qe.value.address,lat:qe.value.lat,lng:qe.value.lng}),setTimeout(()=>{Te.replace(o?"/explore?focus=".concat(r.id):"/explore")},500),Ge.value&&URL.revokeObjectURL(Ge.value),Ge.value=null,Ke.value=null}catch(n){ze.value={open:!0,message:n.message||"Failed to save.",color:"danger"}}finally{$e.value=!1}}else ze.value={open:!0,message:"Please select an image.",color:"warning"}};return o(async()=>{if(await(async()=>{var e;const{data:{user:a}}=await i.auth.getUser();if(!a)return Re.value=null,void(De.value=!0);const{data:l,error:t}=await i.from("user_roles").select("role").eq("user_id",a.id).single();Re.value=t?"user":null!=(e=null==l?void 0:l.role)?e:"user",De.value=!0})(),await(async()=>{const{data:e,error:a}=await i.from("location_types").select("id, name").order("name",{ascending:!0});!a&&e&&(Oe.value=e)})(),Pe.value){const{data:e,error:a}=await i.from("locations").select("\n    id,\n    name,\n    lat,\n    lng,\n    address,\n    description,\n    image,\n    type_id,\n    phone,\n    instagram,\n    line_id,\n    price_range,\n    opening_hours\n  ").eq("id",te.params.id).maybeSingle();!a&&e&&(qe.value={name:e.name,type_id:e.type_id,lat:e.lat,lng:e.lng,address:e.address,image:e.image,description:e.description||"",phone:e.phone||"",instagram:e.instagram||"",line_id:e.line_id||"",price_range:e.price_range||"",opening_hours:e.opening_hours||qe.value.opening_hours},Ge.value=e.image||null),Pe.value&&(null==e?void 0:e.opening_hours)&&(Se.value=!0)}!Pe.value&&De.value&&Re.value&&await(async()=>{if("web"!==m.getPlatform())try{"granted"!==(await v.checkPermissions()).location&&await v.requestPermissions();const e=await v.getCurrentPosition({enableHighAccuracy:!0,timeout:5e3}),{latitude:a,longitude:l}=e.coords;qe.value.lat=a,qe.value.lng=l;const t=await reverseGeocode(a,l);return void(t&&(qe.value.address=t))}catch(e){return void console.warn("Native geolocation failed, falling back to default",e)}return new Promise(e=>{navigator.geolocation.getCurrentPosition(a=>{const{latitude:l,longitude:t}=a.coords;qe.value.lat=l,qe.value.lng=t,e()},a=>{console.warn("Web geolocation failed or denied",a),e()},{enableHighAccuracy:!0,timeout:5e3})})})(),await(async()=>{xe.value=!0;const[{Map:e},a]=await Promise.all([c.importLibrary("maps"),c.importLibrary("marker")]);(null==a?void 0:a.PinElement)&&(null==a?void 0:a.AdvancedMarkerElement)||console.error("Advanced markers not available. Check Maps JS API version/libraries."),Ye=a,Je=new e(document.getElementById("add-map"),{center:{lat:qe.value.lat,lng:qe.value.lng},zoom:14,disableDefaultUI:!0,mapId:"a40f1ec0ad0afbbb12694f19",gestureHandling:"greedy"}),Ie=new Ye.PinElement({background:getComputedStyle(document.documentElement).getPropertyValue("--ion-color-carrot").trim()||"#d8620d",borderColor:"#ffffff",glyphColor:"#ffffff",scale:1.2}),Le=new Ye.AdvancedMarkerElement({map:Je,position:{lat:qe.value.lat,lng:qe.value.lng},content:Ie.element,zIndex:10});const onReady=()=>{Ce.value=!0,requestAnimationFrame(()=>{xe.value=!1})};google.maps.event.addListenerOnce(Je,"idle",onReady),google.maps.event.addListenerOnce(Je,"tilesloaded",onReady),setTimeout(()=>{Ce.value||(onReady(),console.warn("Map ready fallback timeout used"))},3e3);let l=!1;Qe=Je.addListener("click",async e=>{var a;if(!e.latLng)return;ke.value="map";const t=e.latLng.lat(),n=e.latLng.lng();qe.value.lat=t,qe.value.lng=n,Le?Le.position={lat:t,lng:n}:Le=new Ye.AdvancedMarkerElement({map:Je,position:{lat:t,lng:n},content:null!=(a=null==Ie?void 0:Ie.element)?a:void 0,zIndex:10}),Je.panTo({lat:t,lng:n}),(null==Ie?void 0:Ie.element)&&(Ie.element.classList.add("marker-pop"),setTimeout(()=>Ie.element.classList.remove("marker-pop"),220)),l||(Je.setZoom(16),l=!0);const o=await reverseGeocode(t,n);o&&(qe.value.address=o),ke.value=null})})(),updatePinColor();if(await new Promise(e=>{const stop=n(Ce,a=>{a&&(stop(),e())})}),!qe.value.address&&qe.value.lat&&qe.value.lng){const e=await reverseGeocode(qe.value.lat,qe.value.lng);e&&(qe.value.address=e)}Xe=new MutationObserver(updatePinColor),Xe.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),u(()=>{Ge.value&&URL.revokeObjectURL(Ge.value),Qe&&(Qe.remove(),Qe=null),Xe&&(Xe.disconnect(),Xe=null),Le=null,Ie=null,Je=null}),(e,a)=>(g(),r(d(Y),null,{default:s(()=>[f(d(_),null,{default:s(()=>[f(d(b),null,{default:s(()=>[f(d(h),{slot:"start"},{default:s(()=>[f(d(y),{"default-href":"/explore"})]),_:1}),f(d(w),null,{default:s(()=>[P(k(Pe.value?e.$t("addPlace.editTitle"):e.$t("addPlace.title")),1)]),_:1})]),_:1})]),_:1}),f(d(V),{class:"ion-padding"},{default:s(()=>[De.value&&!Re.value?(g(),r(d(L),{key:0},{default:s(()=>[f(d(I),null,{default:s(()=>a[15]||(a[15]=[P(" Please login to submit a place. ",-1)])),_:1,__:[15]})]),_:1})):(g(),U("form",{key:1,onSubmit:x(submitPlace,["prevent"]),class:"form"},[f(d(j),null,{default:s(()=>[f(d(A),{modelValue:qe.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>qe.value.name=e),"label-placement":"stacked",required:"",placeholder:e.$t("addPlace.namePlaceholder")},{default:s(()=>[E("div",oe,[P(k(e.$t("addPlace.nameLabel"))+" ",1),f(d(M),{color:"danger"},{default:s(()=>a[16]||(a[16]=[P("*",-1)])),_:1,__:[16]})])]),_:1},8,["modelValue","placeholder"])]),_:1}),f(d(j),null,{default:s(()=>[f(d(S),{modelValue:qe.value.type_id,"onUpdate:modelValue":a[1]||(a[1]=e=>qe.value.type_id=e),modelModifiers:{number:!0},"label-placement":"stacked",interface:"popover",placeholder:e.$t("addPlace.typePlaceholder"),required:""},{default:s(()=>[E("div",ie,[P(k(e.$t("addPlace.typeLabel"))+" ",1),f(d(M),{color:"danger"},{default:s(()=>a[17]||(a[17]=[P("*",-1)])),_:1,__:[17]})]),(g(!0),U(T,null,D(Oe.value,e=>(g(),r(d(O),{key:e.id,value:e.id},{default:s(()=>[P(k(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),f(d(j),null,{default:s(()=>[f(d(R),null,{default:s(()=>[P(k(e.$t("addPlace.imageLabel"))+" ",1),f(d(M),{color:"danger"},{default:s(()=>a[18]||(a[18]=[P("*",-1)])),_:1,__:[18]})]),_:1}),f(d(h),{slot:"end"},{default:s(()=>[f(d(q),{onClick:takePicture,fill:"clear",disabled:Ze.value},{default:s(()=>[f(d($),{icon:d(z)},null,8,["icon"])]),_:1},8,["disabled"]),f(d(q),{onClick:uploadFromGallery,fill:"clear",disabled:Ze.value},{default:s(()=>[f(d($),{icon:d(B)},null,8,["icon"])]),_:1},8,["disabled"])]),_:1})]),_:1}),Ge.value?(g(),U("div",ue,[E("img",{src:Ge.value,alt:"Preview",class:"img-preview"},null,8,re)])):C("",!0),f(d(j),null,{default:s(()=>[f(d(A),{modelValue:qe.value.address,"onUpdate:modelValue":a[2]||(a[2]=e=>qe.value.address=e),"label-placement":"stacked",placeholder:e.$t("addPlace.addressPlaceholder"),required:"",onIonBlur:onAddressConfirm,onIonChange:onAddressConfirm,onKeyup:F(onAddressConfirm,["enter"])},{default:s(()=>[E("div",se,[P(k(e.$t("addPlace.addressLabel"))+" ",1),f(d(M),{color:"danger"},{default:s(()=>a[19]||(a[19]=[P("*",-1)])),_:1,__:[19]})])]),_:1},8,["modelValue","placeholder"])]),_:1}),E("div",de,[f(d(j),null,{default:s(()=>[f(d(A),{modelValue:qe.value.lat,"onUpdate:modelValue":a[3]||(a[3]=e=>qe.value.lat=e),modelModifiers:{number:!0},type:"number",step:"any","label-placement":"stacked",required:"",readonly:""},{default:s(()=>[E("div",ce,[P(k(e.$t("addPlace.latLabel"))+" ",1),f(d(M),{color:"danger"},{default:s(()=>a[20]||(a[20]=[P("*",-1)])),_:1,__:[20]})])]),_:1},8,["modelValue"])]),_:1}),f(d(j),null,{default:s(()=>[f(d(A),{modelValue:qe.value.lng,"onUpdate:modelValue":a[4]||(a[4]=e=>qe.value.lng=e),modelModifiers:{number:!0},type:"number",step:"any","label-placement":"stacked",required:"",readonly:""},{default:s(()=>[E("div",me,[P(k(e.$t("addPlace.lngLabel"))+" ",1),f(d(M),{color:"danger"},{default:s(()=>a[21]||(a[21]=[P("*",-1)])),_:1,__:[21]})])]),_:1},8,["modelValue"])]),_:1})]),E("div",ve,[E("div",pe,k(e.$t("addPlace.mapHint")),1),E("div",ge,[E("div",{id:"add-map",class:W({"fade-in":Ce.value})},null,2),xe.value?(g(),r(d(H),{key:0,animated:"",class:"map-skeleton"})):C("",!0)])]),Ne.value?(g(),r(d(L),{key:1,color:"high"===Ne.value?"danger":"warning",class:"ion-margin-top",style:{margin:"12px 0 16px"}},{default:s(()=>[f(d(I),null,{default:s(()=>[E("strong",null," âš ï¸ "+k("high"===Ne.value?"Very likely duplicate nearby":"Similar place nearby detected"),1),E("ul",fe,[(g(!0),U(T,null,D(Fe.value.slice(0,3),e=>(g(),U("li",{key:e.id},k(e.name)+" Â· "+k(e.distance_meters)+" m ",1))),128))]),a[22]||(a[22]=E("small",{style:{opacity:"0.8"}}," Verify if this is a different branch, floor, or vendor. ",-1))]),_:1,__:[22]})]),_:1},8,["color"])):C("",!0),f(d(q),{fill:"outline",size:"small",onClick:a[5]||(a[5]=e=>Me.value=!Me.value),style:{"margin-bottom":"12px"}},{default:s(()=>[P(k(Me.value?"Hide Details":"More Details"),1)]),_:1}),Me.value?(g(),U("div",_e,[a[24]||(a[24]=E("p",{style:{"margin-top":"20px","font-weight":"600"}},"Description",-1)),f(d(j),null,{default:s(()=>[f(d(N),{modelValue:qe.value.description,"onUpdate:modelValue":a[6]||(a[6]=e=>qe.value.description=e),label:"Description","label-placement":"stacked",placeholder:"Describe this place (halal status, specialties, notes, etc.)","auto-grow":"",maxlength:1e3,counter:""},null,8,["modelValue"])]),_:1}),a[25]||(a[25]=E("p",{style:{"margin-top":"20px","font-weight":"600"}},"Contact Information",-1)),f(d(j),null,{default:s(()=>[f(d(A),{modelValue:qe.value.phone,"onUpdate:modelValue":a[7]||(a[7]=e=>qe.value.phone=e),label:"Phone / WhatsApp","label-placement":"stacked",placeholder:"+886 900 000 000"},null,8,["modelValue"])]),_:1}),f(d(j),null,{default:s(()=>[f(d(A),{modelValue:qe.value.instagram,"onUpdate:modelValue":a[8]||(a[8]=e=>qe.value.instagram=e),label:"Instagram","label-placement":"stacked",placeholder:"@username"},null,8,["modelValue"])]),_:1}),f(d(j),null,{default:s(()=>[f(d(A),{modelValue:qe.value.line_id,"onUpdate:modelValue":a[9]||(a[9]=e=>qe.value.line_id=e),label:"LINE ID","label-placement":"stacked",placeholder:"yourlineid"},null,8,["modelValue"])]),_:1}),a[26]||(a[26]=E("p",{style:{"margin-top":"20px","font-weight":"600"}},"Price Range",-1)),f(d(j),null,{default:s(()=>[f(d(A),{modelValue:qe.value.price_range,"onUpdate:modelValue":a[10]||(a[10]=e=>qe.value.price_range=e),label:"Price Range","label-placement":"stacked",placeholder:"NTD 100â€“300"},null,8,["modelValue"])]),_:1}),a[27]||(a[27]=E("p",{style:{"margin-top":"20px","font-weight":"600"}},"Opening Hours",-1)),f(d(G),{class:"opening-hours-list"},{default:s(()=>[(g(),U(T,null,D(Ae,(e,l)=>f(d(j),{key:l,lines:"full",class:"opening-hours-item"},{default:s(()=>[f(d(K),{modelValue:qe.value.opening_hours[l].active,"onUpdate:modelValue":e=>qe.value.opening_hours[l].active=e,slot:"start",onIonChange:a[11]||(a[11]=e=>Se.value=!0)},null,8,["modelValue","onUpdate:modelValue"]),f(d(R),{class:"day-label"},{default:s(()=>[P(k(e),1)]),_:2},1024),qe.value.opening_hours[l].active?(g(),U("div",he,[f(d(A),{modelValue:qe.value.opening_hours[l].open,"onUpdate:modelValue":e=>qe.value.opening_hours[l].open=e,type:"time",class:"time-field",onIonInput:a[12]||(a[12]=e=>Se.value=!0)},null,8,["modelValue","onUpdate:modelValue"]),a[23]||(a[23]=E("span",{style:{margin:"0 4px"}},"-",-1)),f(d(A),{modelValue:qe.value.opening_hours[l].close,"onUpdate:modelValue":e=>qe.value.opening_hours[l].close=e,type:"time",class:"time-field",onIonInput:a[13]||(a[13]=e=>Se.value=!0)},null,8,["modelValue","onUpdate:modelValue"])])):(g(),U("span",be," Closed "))]),_:2},1024)),64))]),_:1})])):C("",!0),De.value&&Re.value&&!isPrivileged(Re.value)?(g(),r(d(L),{key:3,color:"light"},{default:s(()=>[f(d(I),{style:{"font-size":"14px"}},{default:s(()=>a[28]||(a[28]=[P(" ðŸ•µï¸ Submissions will be reviewed before appearing publicly. ",-1)])),_:1,__:[28]})]),_:1})):C("",!0),f(d(q),{type:"submit",expand:"block",disabled:$e.value||!Be.value},{default:s(()=>[$e.value?(g(),r(d(Z),{key:0,name:"lines-small",class:"mr-2"})):(g(),U("span",ye,k(Pe.value?e.$t("addPlace.updateBtn"):e.$t("addPlace.saveBtn")),1))]),_:1},8,["disabled"])],32)),f(d(J),{"is-open":ze.value.open,message:ze.value.message,color:ze.value.color,duration:2200,onDidDismiss:a[14]||(a[14]=e=>ze.value.open=!1)},null,8,["is-open","message","color"])]),_:1})]),_:1}))}}),[["__scopeId","data-v-98173b64"]]);export{Pe as default};
