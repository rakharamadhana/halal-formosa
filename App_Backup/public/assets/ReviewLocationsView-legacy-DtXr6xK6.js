System.register(["./index-legacy-DryGZUwD.js","./html5-qrcode-legacy-D5DtuMLO.js"],function(e,l){"use strict";var a,t,o,n,d,i,u,s,c,r,p,_,f,v,m,g,y,k,w,h,x,b,L,V,M,j,C,R,P,q,D,S,U,A,N;return{setters:[e=>{a=e.d,t=e.r,o=e.o,n=e.c,d=e.w,i=e.u,u=e.s,s=e.b,c=e.e,r=e.O,p=e.ad,_=e.aM,f=e.S,v=e.j,m=e.ai,g=e.H,y=e.J,k=e.aj,w=e.bh,h=e.W,x=e.n,b=e.i,L=e.t,V=e.ao,M=e.p,j=e.V,C=e.P,R=e.Q,P=e.R,q=e.F,D=e.k,S=e.by,U=e.b5,A=e.y,N=e.cv},null],execute:function(){const l={key:0},O=["src"],B={class:"ion-margin-top"},F=["src"],H={style:{"margin-top":"20px",display:"flex",gap:"12px"}};e("default",a({__name:"ReviewLocationsView",setup(e){const a=t([]),I=t(!0),J=t(!1),Q=t(null);async function loadPendingLocations(){I.value=!0;const{data:e}=await u.from("locations").select("*").eq("approved",!1).order("created_at",{ascending:!1});a.value=e||[],I.value=!1}function closeModal(){Q.value=null,J.value=!1}return o(loadPendingLocations),(e,t)=>(s(),n(i(A),null,{default:d(()=>[c(i(r),null,{default:d(()=>[c(p,{title:"Review Locations",icon:i(_),showBack:!0,backRoute:"/profile"},null,8,["icon"])]),_:1}),c(i(f),{class:"ion-padding"},{default:d(()=>[I.value?(s(),v("div",l,[c(i(m),null,{default:d(()=>[(s(),v(g,null,y(5,e=>c(i(k),{key:e},{default:d(()=>[c(i(w),{slot:"start"},{default:d(()=>[c(i(h),{animated:"",style:{width:"64px",height:"64px","border-radius":"8px"}})]),_:1}),c(i(x),null,{default:d(()=>[b("h2",null,[c(i(h),{animated:"",style:{width:"60%",height:"16px"}})]),b("p",null,[c(i(h),{animated:"",style:{width:"40%",height:"14px"}})])]),_:1})]),_:2},1024)),64))]),_:1})])):a.value.length?(s(),n(i(m),{key:1},{default:d(()=>[(s(!0),v(g,null,y(a.value,e=>(s(),n(i(k),{key:e.id,button:"",detail:"",onClick:l=>function openLocationModal(e){Q.value=N({...e}),J.value=!0}(e)},{default:d(()=>[c(i(w),{slot:"start"},{default:d(()=>[b("img",{src:e.image,alt:"Location image"},null,8,O)]),_:2},1024),c(i(x),null,{default:d(()=>[b("h2",null,L(e.name),1),b("p",null,L(e.address),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})):(s(),n(i(V),{key:2,color:"medium"},{default:d(()=>t[5]||(t[5]=[M(" No pending locations. ",-1)])),_:1,__:[5]})),c(i(j),{"is-open":J.value,onDidDismiss:closeModal},{default:d(()=>[c(i(r),null,{default:d(()=>[c(i(C),null,{default:d(()=>[c(i(R),null,{default:d(()=>t[6]||(t[6]=[M("Review Location",-1)])),_:1,__:[6]}),c(i(P),{slot:"end"},{default:d(()=>[c(i(q),{onClick:closeModal},{default:d(()=>t[7]||(t[7]=[M("Close",-1)])),_:1,__:[7]})]),_:1})]),_:1})]),_:1}),c(i(f),{class:"ion-padding"},{default:d(()=>[Q.value?(s(),n(i(m),{key:0},{default:d(()=>[c(i(k),null,{default:d(()=>[c(i(x),{position:"stacked"},{default:d(()=>t[8]||(t[8]=[M("Name",-1)])),_:1,__:[8]}),c(i(S),{modelValue:Q.value.name,"onUpdate:modelValue":t[0]||(t[0]=e=>Q.value.name=e)},null,8,["modelValue"])]),_:1}),c(i(k),null,{default:d(()=>[c(i(x),{position:"stacked"},{default:d(()=>t[9]||(t[9]=[M("Address",-1)])),_:1,__:[9]}),c(i(S),{modelValue:Q.value.address,"onUpdate:modelValue":t[1]||(t[1]=e=>Q.value.address=e)},null,8,["modelValue"])]),_:1}),c(i(k),null,{default:d(()=>[c(i(x),{position:"stacked"},{default:d(()=>t[10]||(t[10]=[M("Description",-1)])),_:1,__:[10]}),c(i(U),{modelValue:Q.value.description,"onUpdate:modelValue":t[2]||(t[2]=e=>Q.value.description=e),"auto-grow":""},null,8,["modelValue"])]),_:1}),b("div",B,[b("img",{src:Q.value.image,style:{width:"100%","border-radius":"12px"}},null,8,F)]),b("div",H,[c(i(q),{expand:"block",color:"success",onClick:t[3]||(t[3]=e=>async function approveLocation(e){const{data:l}=await u.auth.getUser(),a=null==l?void 0:l.user;a&&(await u.from("locations").update({name:e.name,address:e.address,description:e.description,approved:!0,approved_by:a.id,approved_at:(new Date).toISOString()}).eq("id",e.id),await loadPendingLocations(),closeModal())}(Q.value))},{default:d(()=>t[11]||(t[11]=[M(" Approve ",-1)])),_:1,__:[11]}),c(i(q),{expand:"block",color:"danger",onClick:t[4]||(t[4]=e=>async function rejectLocation(e){await u.from("locations").delete().eq("id",e),await loadPendingLocations(),closeModal()}(Q.value.id))},{default:d(()=>t[12]||(t[12]=[M(" Reject ",-1)])),_:1,__:[12]})])]),_:1})):D("",!0)]),_:1})]),_:1},8,["is-open"])]),_:1})]),_:1}))}}))}}});
