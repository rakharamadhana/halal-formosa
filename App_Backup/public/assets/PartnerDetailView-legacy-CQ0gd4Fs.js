System.register(["./index-legacy-DryGZUwD.js","./zoom-legacy-C7S6DULt.js","./index-legacy-D28wTZi4.js","./html5-qrcode-legacy-D5DtuMLO.js"],function(e,a){"use strict";var t,i,l,r,n,o,d,s,p,c,u,v,m,g,_,f,h,x,b,w,y,k,z,C,P,j,$,L,q,S,D,N,T,B,V,W,E,H,I,F,G;return{setters:[e=>{t=e.d,i=e.bm,l=e.r,r=e.o,n=e.a8,o=e.c,d=e.w,s=e.u,p=e.s,c=e.b,u=e.e,v=e.O,m=e.ad,g=e.S,_=e.i,f=e.j,h=e.W,x=e.H,b=e.X,w=e.L,y=e.k,k=e.t,z=e.ag,C=e.p,P=e.J,j=e.ah,$=e.D,L=e.G,q=e.E,S=e.N,D=e.n,N=e.aS,T=e.V,B=e.F,V=e.bp,W=e.br,E=e.y,H=e.bN,I=e._},e=>{F=e.Z},e=>{G=e.B},null],execute:function(){var a=document.createElement("style");a.textContent='.header-block[data-v-540493d4]{text-align:center;margin-bottom:16px}.body-logo[data-v-540493d4]{width:120px;height:120px;object-fit:contain;margin-bottom:8px}.body-name[data-v-540493d4]{margin:4px 0;font-size:1.3rem;font-weight:600}.chip-row[data-v-540493d4],.scope-inline[data-v-540493d4]{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-bottom:12px}@media (max-width: 480px){.scope-inline[data-v-540493d4]{flex-wrap:nowrap;overflow-x:auto;justify-content:flex-start;padding-bottom:4px;-webkit-overflow-scrolling:touch}.scope-inline[data-v-540493d4]::-webkit-scrollbar{display:none}}.scope-chip[data-v-540493d4]{width:auto;max-width:100%;font-size:13px;padding-inline:10px;white-space:nowrap;flex-shrink:0}.body-description[data-v-540493d4]{font-size:.95rem;line-height:1.6}.program-list[data-v-540493d4]{padding-left:16px}.external-link[data-v-540493d4]{display:inline-block;margin-top:6px;color:var(--ion-color-primary)}.hero-cover[data-v-540493d4]{position:relative;height:240px;width:100vw;margin-left:calc(-50vw + 50%);margin-right:calc(-50vw + 50%);border-radius:0;overflow:hidden;margin-bottom:16px}.hero-bg[data-v-540493d4]{position:absolute;top:0;right:0;bottom:0;left:0;background-size:cover;background-position:center;filter:blur(22px);transform:scale(1.2);opacity:.35}.hero-content[data-v-540493d4]{position:relative;z-index:2;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:16px}.hero-logo[data-v-540493d4]{width:96px;height:96px;object-fit:contain;background:#fff;border-radius:12px;padding:8px;box-shadow:0 8px 24px rgba(0,0,0,.25);margin-bottom:8px}.body-name[data-v-540493d4]{margin:4px 0;font-size:1.2rem;font-weight:600}.verified-badge[data-v-540493d4]{margin-top:4px}.fullscreen-swiper[data-v-540493d4],.fullscreen-swiper .swiper-slide[data-v-540493d4],.fullscreen-swiper .swiper-zoom-container[data-v-540493d4]{width:100%;height:100%}.fullscreen-swiper .swiper-slide[data-v-540493d4]{display:flex;justify-content:center;align-items:center;background:#000}.fullscreen-swiper img[data-v-540493d4]{max-width:100%;max-height:100%;object-fit:contain}.image-modal-close-btn[data-v-540493d4]{position:absolute;top:calc(env(safe-area-inset-top,0px) + 16px);right:16px;z-index:9999}.loading-overlay[data-v-540493d4]{position:fixed;top:0;right:0;bottom:0;left:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.35);backdrop-filter:blur(2px)}.partner-detail-badge[data-v-540493d4]{position:relative;margin-top:8px;top:0;left:0;padding:6px 14px;border-radius:999px}.hero-logo-wrap[data-v-540493d4]{position:relative;border-radius:14px}.gold-glow-wrap[data-v-540493d4]:before{content:"";position:absolute;top:-12px;right:-12px;bottom:-12px;left:-12px;border-radius:22px;background:radial-gradient(circle at 30% 30%,rgba(255,215,0,.9),transparent 60%),radial-gradient(circle at 70% 70%,rgba(255,193,7,.6),transparent 65%);filter:blur(8px);z-index:0}.hero-logo[data-v-540493d4]{position:relative;z-index:1}\n',document.head.appendChild(a);const J={class:"hero-cover"},O={key:0,class:"hero-content"},X=["src","alt"],Z={class:"body-name"},A={class:"ion-padding"},K={class:"scope-inline"},M={key:1,class:"body-description"},Q={key:1,class:"program-list"},R={key:1,class:"discover-grid"},U=["src"],Y={class:"discover-name"},ee={key:1,class:"discover-grid"},ae=["src"],te={class:"discover-name"},ie={style:{"font-size":"12px",color:"var(--ion-color-medium)"}},le={key:1,class:"discover-grid"},re=["src"],ne={class:"discover-name"},oe={style:{"font-size":"12px",color:"var(--ion-color-medium)"}},de={key:0},se={key:1},pe={key:2},ce={class:"swiper-zoom-container"},ue=["src","alt"];e("default",I(t({__name:"PartnerDetailView",setup(e){const a=i().params.id,t=l(!0),I=l(!1);function openLogoPreview(){n.log("partner_logo_preview",{partner_id:ve.value.id,partner_name:ve.value.name,partner_tier:ve.value.partner_tier}),I.value=!0}function closeLogoPreview(){I.value=!1}const ve=l({id:"",name:"",logo:"",verified:!1,partner_tier:null,scopes:[],about:"",programs:[],address:"",phone:"",email:"",website:""}),me=l([]),ge=l(!1),_e=l([]),fe=l(!1),he=l([]),xe=l(!1);async function openWebsite(){n.log("partner_website_click",{partner_id:ve.value.id,partner_name:ve.value.name,partner_tier:ve.value.partner_tier,website:ve.value.website}),await G.open({url:ve.value.website,windowName:"_self",toolbarColor:"#e67e22",presentationStyle:"fullscreen"})}return r(async()=>{a&&(t.value=!0,await async function fetchPartner(e){var a,t,i,l,r,n,o,d,s;const{data:c,error:u}=await p.from("partners").select("\n    id,\n    name,\n    slug,\n    logo_url,\n    verified,\n    partner_tier,\n    about,\n    address,\n    phone,\n    email,\n    website,\n\n    partners_scopes (\n      partner_scopes (\n        id,\n        name,\n        icon,\n        color\n      )\n    ),\n\n    partner_programs (\n      id,\n      name\n    )\n  ").eq("id",e).single();u?console.error("[Partner]",u):ve.value={id:c.id,name:c.name,logo:c.logo_url,verified:c.verified,partner_tier:c.partner_tier,about:null!==(a=c.about)&&void 0!==a?a:"",address:null!==(t=c.address)&&void 0!==t?t:"",phone:null!==(i=c.phone)&&void 0!==i?i:"",email:null!==(l=c.email)&&void 0!==l?l:"",website:null!==(r=c.website)&&void 0!==r?r:"",scopes:null!==(n=null===(o=c.partners_scopes)||void 0===o?void 0:o.map(e=>e.partner_scopes.name))&&void 0!==n?n:[],programs:null!==(d=null===(s=c.partner_programs)||void 0===s?void 0:s.map(e=>e.name))&&void 0!==d?d:[]}}(a),t.value=!1,n.log("partner_detail_open",{partner_id:ve.value.id,partner_name:ve.value.name,partner_tier:ve.value.partner_tier,verified:ve.value.verified}),"gold"===ve.value.partner_tier&&(async function fetchCertifiedProducts(){if("gold"!==ve.value.partner_tier)return;ge.value=!0;const{data:e,error:a}=await p.from("product_certifications").select("\n      id,\n      certified_at,\n      products (\n        id,\n        barcode,\n        name,\n        status,\n        photo_front_url\n      )\n    ").eq("partner_id",ve.value.id).eq("status","active");!a&&e&&(me.value=e.filter(e=>e.products).map(e=>({...e.products,certified_at:e.certified_at}))),ge.value=!1}(),async function fetchCertifiedLocations(){if("gold"!==ve.value.partner_tier)return;fe.value=!0;const{data:e,error:a}=await p.from("location_certifications").select("\n      certified_at,\n      locations (\n        id,\n        name,\n        image,\n        address,\n        location_types ( name )\n      )\n    ").eq("partner_id",ve.value.id).eq("status","active");!a&&e&&(_e.value=e.filter(e=>e.locations).map(e=>({...e.locations,certified_at:e.certified_at}))),fe.value=!1}(),async function fetchPartnerTrips(){if("gold"!==ve.value.partner_tier)return;xe.value=!0;const{data:e,error:a}=await p.from("trips").select("\n      id,\n      title,\n      title_zh,\n      cover_url,\n      duration,\n      external_url\n    ").eq("provider_id",ve.value.id).eq("is_active",!0).order("created_at",{ascending:!1});!a&&e&&(he.value=e),xe.value=!1}()))}),(e,a)=>(c(),o(s(E),null,{default:d(()=>[u(s(v),null,{default:d(()=>[u(m,{title:ve.value.name||e.$t("partner.detailTitle"),showBack:!0,icon:"none"},null,8,["title"])]),_:1}),u(s(g),null,{default:d(()=>[_("div",J,[t.value?(c(),f("div",O,[u(s(h),{animated:"",style:{width:"96px",height:"96px","border-radius":"12px","margin-bottom":"8px"}}),u(s(h),{animated:"",style:{width:"180px",height:"20px"}})])):(c(),f(x,{key:1},[_("div",{class:"hero-bg",style:b({backgroundImage:`url(${ve.value.logo})`})},null,4),_("div",{class:w(["hero-content","gold"===ve.value.partner_tier&&"hf-gold-glow"])},[_("div",{class:w(["hero-logo-wrap",{"gold-glow-wrap":"gold"===ve.value.partner_tier}]),onClick:openLogoPreview},[_("img",{src:ve.value.logo,alt:ve.value.name,class:"hero-logo clickable"},null,8,X)],2),_("h2",Z,k(ve.value.name),1),ve.value.partner_tier?(c(),o(s(z),{key:0,class:w(["tier-badge","partner-detail-badge",`${ve.value.partner_tier}`,"ion-text-uppercase"])},{default:d(()=>[C(k(ve.value.partner_tier)+" Partner ",1)]),_:1},8,["class"])):ve.value.verified?(c(),o(s(z),{key:1,color:"success",class:"verified-badge"},{default:d(()=>a[0]||(a[0]=[C(" Verified Halal Certification Body ",-1)])),_:1,__:[0]})):y("",!0)],2)],64))]),_("div",A,[_("div",K,[(c(!0),f(x,null,P(ve.value.scopes,e=>(c(),o(s(j),{key:e,class:"scope-chip chip-primary"},{default:d(()=>[C(k(e),1)]),_:2},1024))),128))]),u(s($),null,{default:d(()=>[u(s(L),null,{default:d(()=>[u(s(q),null,{default:d(()=>[C(k(e.$t("partner.about")),1)]),_:1})]),_:1}),u(s(S),null,{default:d(()=>[t.value?(c(),f(x,{key:0},[u(s(h),{animated:"",style:{width:"100%",height:"14px","margin-bottom":"8px"}}),u(s(h),{animated:"",style:{width:"95%",height:"14px","margin-bottom":"8px"}}),u(s(h),{animated:"",style:{width:"80%",height:"14px"}})],64)):(c(),f("p",M,k(ve.value.about),1))]),_:1})]),_:1}),t.value||ve.value.programs.length?(c(),o(s($),{key:0},{default:d(()=>[u(s(L),null,{default:d(()=>[u(s(q),null,{default:d(()=>[C(k(e.$t("partner.programs")),1)]),_:1})]),_:1}),u(s(S),null,{default:d(()=>[t.value?(c(),f(x,{key:0},[u(s(h),{animated:"",style:{width:"90%",height:"14px","margin-bottom":"6px"}}),u(s(h),{animated:"",style:{width:"75%",height:"14px","margin-bottom":"6px"}}),u(s(h),{animated:"",style:{width:"60%",height:"14px"}})],64)):(c(),f("ul",Q,[(c(!0),f(x,null,P(ve.value.programs,e=>(c(),f("li",{key:e},k(e),1))),128))]))]),_:1})]),_:1})):y("",!0),"gold"===ve.value.partner_tier&&(ge.value||me.value.length)?(c(),o(s($),{key:1},{default:d(()=>[u(s(L),null,{default:d(()=>[u(s(q),null,{default:d(()=>a[1]||(a[1]=[C(" Certified Products ",-1)])),_:1,__:[1]})]),_:1}),u(s(S),null,{default:d(()=>[ge.value?(c(),f(x,{key:0},[u(s(h),{animated:"",style:{width:"100%",height:"140px","border-radius":"12px"}}),u(s(h),{animated:"",style:{width:"80%",height:"14px","margin-top":"8px"}})],64)):(c(),f("div",R,[(c(!0),f(x,null,P(me.value,e=>(c(),o(s($),{key:e.id,class:"discover-item",button:"",onClick:a=>function openCertifiedProduct(e){n.log("partner_certified_product_click",{partner_id:ve.value.id,partner_name:ve.value.name,partner_tier:ve.value.partner_tier,product_id:e.id,product_barcode:e.barcode,product_name:e.name}),H.push(`/item/${e.barcode}`)}(e)},{default:d(()=>[_("img",{src:e.photo_front_url||"https://placehold.co/200x200",class:"discover-img"},null,8,U),u(s(D),{class:"discover-label"},{default:d(()=>[_("p",Y,k(e.name),1),u(s(j),{color:"success",style:{"font-size":"12px"}},{default:d(()=>[C(k(e.status),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]))]),_:1})]),_:1})):y("",!0),"gold"===ve.value.partner_tier&&(fe.value||_e.value.length)?(c(),o(s($),{key:2},{default:d(()=>[u(s(L),null,{default:d(()=>[u(s(q),null,{default:d(()=>a[2]||(a[2]=[C(" Certified Locations ",-1)])),_:1,__:[2]})]),_:1}),u(s(S),null,{default:d(()=>[fe.value?(c(),f(x,{key:0},[u(s(h),{animated:"",style:{width:"100%",height:"140px","border-radius":"12px"}}),u(s(h),{animated:"",style:{width:"80%",height:"14px","margin-top":"8px"}})],64)):(c(),f("div",ee,[(c(!0),f(x,null,P(_e.value,e=>(c(),o(s($),{key:e.id,class:"discover-item",button:"",onClick:a=>function openCertifiedLocation(e){n.log("partner_certified_location_click",{partner_id:ve.value.id,partner_name:ve.value.name,partner_tier:ve.value.partner_tier,location_id:e.id,location_name:e.name}),H.push(`/place/${e.id}`)}(e)},{default:d(()=>[_("img",{src:e.image||"https://placehold.co/200x200",class:"discover-img"},null,8,ae),u(s(D),{class:"discover-label"},{default:d(()=>{var a;return[_("p",te,k(e.name),1),_("p",ie,k(null===(a=e.location_types)||void 0===a?void 0:a.name),1)]}),_:2},1024)]),_:2},1032,["onClick"]))),128))]))]),_:1})]),_:1})):y("",!0),"gold"===ve.value.partner_tier&&(xe.value||he.value.length)?(c(),o(s($),{key:3},{default:d(()=>[u(s(L),null,{default:d(()=>[u(s(q),null,{default:d(()=>a[3]||(a[3]=[C(" Partner Trips ",-1)])),_:1,__:[3]})]),_:1}),u(s(S),null,{default:d(()=>[xe.value?(c(),f(x,{key:0},[u(s(h),{animated:"",style:{width:"100%",height:"140px","border-radius":"12px"}}),u(s(h),{animated:"",style:{width:"80%",height:"14px","margin-top":"8px"}})],64)):(c(),f("div",le,[(c(!0),f(x,null,P(he.value,a=>(c(),o(s($),{key:a.id,class:"discover-item",button:"",onClick:e=>async function openTrip(e){n.log("partner_trip_click",{partner_id:ve.value.id,partner_name:ve.value.name,partner_tier:ve.value.partner_tier,trip_id:e.id,trip_title:e.title}),await p.rpc("increment_trip_view",{p_trip_id:e.id}),await G.open({url:e.external_url,windowName:"_self",toolbarColor:"#e67e22",presentationStyle:"fullscreen"})}(a)},{default:d(()=>[_("img",{src:a.cover_url||"https://placehold.co/200x200",class:"discover-img"},null,8,re),u(s(D),{class:"discover-label"},{default:d(()=>[_("p",ne,k("zh-tw"===e.$i18n.locale&&a.title_zh||a.title),1),_("p",oe," ðŸ•’ "+k(a.duration),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]))]),_:1})]),_:1})):y("",!0),u(s($),null,{default:d(()=>[u(s(L),null,{default:d(()=>[u(s(q),null,{default:d(()=>[C(k(e.$t("partner.contact")),1)]),_:1})]),_:1}),u(s(S),null,{default:d(()=>[t.value?(c(),f(x,{key:0},[u(s(h),{animated:"",style:{width:"80%",height:"14px","margin-bottom":"8px"}}),u(s(h),{animated:"",style:{width:"60%",height:"14px","margin-bottom":"8px"}}),u(s(h),{animated:"",style:{width:"70%",height:"14px"}})],64)):(c(),f(x,{key:1},[ve.value.address?(c(),f("p",de,"ðŸ“ "+k(ve.value.address),1)):y("",!0),ve.value.phone?(c(),f("p",se,"ðŸ“ž "+k(ve.value.phone),1)):y("",!0),ve.value.email?(c(),f("p",pe,"âœ‰ï¸ "+k(ve.value.email),1)):y("",!0),ve.value.website?(c(),f("a",{key:3,href:"#",onClick:N(openWebsite,["prevent"]),class:"external-link"}," ðŸŒ "+k(ve.value.website),1)):y("",!0)],64))]),_:1})]),_:1})])]),_:1}),u(s(T),{"is-open":I.value,onDidDismiss:closeLogoPreview},{default:d(()=>[u(s(g),{fullscreen:""},{default:d(()=>[u(s(B),{fill:"solid",color:"carrot",class:"image-modal-close-btn",onClick:closeLogoPreview},{default:d(()=>a[4]||(a[4]=[C(" âœ• ",-1)])),_:1,__:[4]}),u(s(V),{modules:[s(F)],zoom:!0,"slides-per-view":1,class:"fullscreen-swiper"},{default:d(()=>[u(s(W),null,{default:d(()=>[_("div",ce,[_("img",{src:ve.value.logo,alt:ve.value.name},null,8,ue)])]),_:1})]),_:1},8,["modules"])]),_:1})]),_:1},8,["is-open"])]),_:1}))}}),[["__scopeId","data-v-540493d4"]]))}}});
