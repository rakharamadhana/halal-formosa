import{d as a,r as e,A as l,c as t,w as o,u as n,l as s,aq as i,ar as u,S as r,ct as c,ao as d,F as g,by as m,y as p,B as v,bm as h,b as f,e as b,i as _,p as I,cp as k,cu as y,t as w,aS as x,k as S,s as $,a9 as T}from"./index-D9IhqqAc.js";import{_ as V}from"./android-chrome-512x512-BtdW6RNG.js";import"./html5-qrcode-D_4nuB1t.js";const q={class:"auth-container"},A={class:"top-bar"},C={class:"lang-wrapper"},P={class:"auth-title"},W={class:"auth-subtitle"},B={class:"input-card"},L={class:"input-card"},j={class:"divider"},E=a({components:{IonPage:p,IonInput:m,IonButton:g,IonText:d,IonInputPasswordToggle:c,IonContent:r,IonSelectOption:u,IonSelect:i,IonIcon:s}}),G=a({...E,__name:"LoginView",setup(a){const E=e(function getInitialTheme(){const a=localStorage.getItem("theme");return"dark"===a||"light"===a?a:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}());document.documentElement.classList.toggle("ion-palette-dark","dark"===E.value);const{locale:G}=l(),H=e(""),M=e(""),O=e(""),U=e(!1),z=v(),F=h();async function login(){U.value=!0,O.value="";const{error:a}=await $.auth.signInWithPassword({email:H.value,password:M.value});U.value=!1,a&&(O.value=a.message)}function toggleTheme(){!function applyTheme(a){document.documentElement.classList.toggle("ion-palette-dark","dark"===a),localStorage.setItem("theme",a),E.value=a}("dark"===E.value?"light":"dark")}async function loginWithGoogle(){var a;O.value="";const e=F.query.redirect,l="string"==typeof e?e:Array.isArray(e)&&e.length>0&&null!=(a=e[0])?a:"/",t=T.isNativePlatform()?"myapp://callback":window.location.origin+l,{error:o}=await $.auth.signInWithOAuth({provider:"google",options:{redirectTo:t,queryParams:{next:l}}});o&&(O.value=o.message)}function goHome(){z.push("/")}return(a,e)=>(f(),t(n(p),null,{default:o(()=>[b(n(r),{fullscreen:"",class:"auth-page"},{default:o(()=>[_("div",q,[_("div",A,[_("div",C,[b(n(i),{interface:"popover",value:n(G),onIonChange:e[0]||(e[0]=a=>function setLanguage(a){G.value=a,localStorage.setItem("lang",a)}(a.detail.value)),class:"lang-select"},{default:o(()=>[b(n(u),{value:"en"},{default:o(()=>e[3]||(e[3]=[I("English",-1)])),_:1,__:[3]}),b(n(u),{value:"id"},{default:o(()=>e[4]||(e[4]=[I("Bahasa Indonesia",-1)])),_:1,__:[4]}),b(n(u),{value:"ms"},{default:o(()=>e[5]||(e[5]=[I("Bahasa Melayu",-1)])),_:1,__:[5]}),b(n(u),{value:"zh"},{default:o(()=>e[6]||(e[6]=[I("繁體中文",-1)])),_:1,__:[6]})]),_:1},8,["value"])]),b(n(g),{fill:"clear",class:"theme-btn",style:{"border-radius":"50px"},onClick:toggleTheme},{default:o(()=>[b(n(s),{icon:"dark"===E.value?n(k):n(y),slot:"icon-only"},null,8,["icon"])]),_:1})]),e[7]||(e[7]=_("div",{class:"logo-wrapper"},[_("img",{src:V,alt:"App logo",class:"app-logo"})],-1)),_("h1",P,w(a.$t("auth.login")),1),_("p",W,w(a.$t("auth.loginSubtitle")),1),_("form",{onSubmit:x(login,["prevent"])},[_("div",B,[b(n(m),{fill:"outline",label:a.$t("auth.email"),"label-placement":"floating",type:"email",modelValue:H.value,"onUpdate:modelValue":e[1]||(e[1]=a=>H.value=a),required:""},null,8,["label","modelValue"])]),_("div",L,[b(n(m),{fill:"outline",label:a.$t("auth.password"),"label-placement":"floating",type:"password",modelValue:M.value,"onUpdate:modelValue":e[2]||(e[2]=a=>M.value=a),required:""},{default:o(()=>[b(n(c),{slot:"end"})]),_:1},8,["label","modelValue"])]),O.value?(f(),t(n(d),{key:0,color:"danger",class:"error-text"},{default:o(()=>[I(w(O.value),1)]),_:1})):S("",!0),b(n(g),{type:"submit",expand:"block",color:"carrot",class:"primary-btn",disabled:U.value},{default:o(()=>[I(w(U.value?a.$t("auth.loggingIn"):a.$t("auth.login")),1)]),_:1},8,["disabled"]),_("div",j,[_("span",null,w(a.$t("common.or")),1)]),b(n(g),{expand:"block",fill:"outline",color:"carrot",onClick:loginWithGoogle},{default:o(()=>[I(w(a.$t("auth.continueWithGoogle")),1)]),_:1}),_("div",{class:"back-divider",onClick:goHome},[_("span",null,w(a.$t("common.backToHome")),1)])],32)])]),_:1})]),_:1}))}});export{G as default};
