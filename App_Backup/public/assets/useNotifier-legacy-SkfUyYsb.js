System.register(["./index-legacy-DryGZUwD.js"],function(e,n){"use strict";var t;return{setters:[e=>{t=e.s}],execute:function(){e("u",function useNotifier(){return{notifyEvent:async(e,n,i,s,o={},c=["discord","onesignal"])=>{try{const a="myapp://";o.link||("new_product"!==e&&"update_product"!==e||!o.barcode?"new_place"!==e&&"update_place"!==e||!o.id?"new_article"!==e&&"update_article"!==e||!o.id||(o.link=`${a}news/${o.id}`):o.link=`${a}place/${o.id}`:o.link=`${a}item/${o.barcode}`);const{data:{session:r}}=await t.auth.getSession(),l={"Content-Type":"application/json"};null!=r&&r.access_token?l.Authorization=`Bearer ${r.access_token}`:l.Authorization="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN2bWx3bnptaGVpaXNoa2R3YWZrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMzNDk3OTUsImV4cCI6MjA2ODkyNTc5NX0.DQ5Xuq0F2x_5EJAMzUQreAWY9ecyTCd3mORl-Fo0Ydo";const u={type:null!=e?e:"unknown",title:null!=n?n:"Notification",message:null!=i?i:"",image:s||null,data:o||{},channels:c},d=await fetch("https://svmlwnzmheiishkdwafk.supabase.co/functions/v1/notify-event",{method:"POST",headers:l,body:JSON.stringify(u)});return d.ok?(console.log("✅ notifyEvent sent:",e,o.link||"no link"),{success:!0}):(console.error("❌ notifyEvent failed:",await d.text()),{success:!1})}catch(a){return console.error("❌ notifyEvent exception:",a),{success:!1,error:String(a)}}}}})}}});
