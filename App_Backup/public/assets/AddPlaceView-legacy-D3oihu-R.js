System.register(["./index-legacy-DryGZUwD.js","./useNotifier-legacy-SkfUyYsb.js","./html5-qrcode-legacy-D5DtuMLO.js"],function(e,a){"use strict";var l,t,n,o,i,r,u,d,s,c,m,p,v,g,f,b,h,_,y,w,P,k,x,V,U,L,I,C,$,E,j,A,S,M,T,z,D,O,R,q,B,F,W,H,N,G,Z,K,J,Y,Q,X,ee,ae,le,te,ne,oe,ie;return{setters:[e=>{l=e.d,t=e.a6,n=e.bm,o=e.r,i=e.a7,r=e.o,u=e.s,d=e.a,s=e.c,c=e.w,m=e.u,p=e.bx,v=e.a9,g=e.ab,f=e.B,b=e.b,h=e.e,_=e.O,y=e.P,w=e.R,P=e.b1,k=e.Q,x=e.p,V=e.t,U=e.S,L=e.j,I=e.D,C=e.N,$=e.aS,E=e.k,j=e.i,A=e.aj,S=e.by,M=e.ao,T=e.aq,z=e.H,D=e.J,O=e.ar,R=e.n,q=e.F,B=e.l,F=e.bz,W=e.bA,H=e.bB,N=e.L,G=e.W,Z=e.b5,K=e.ai,J=e.b6,Y=e.ba,Q=e.bC,X=e.y,ee=e.bD,ae=e.bE,le=e.bF,te=e.am,ne=e.a8,oe=e._},e=>{ie=e.u},null],execute:function(){var a=document.createElement("style");a.textContent=".form[data-v-98173b64] .ion-invalid{--highlight-color-invalid: var(--ion-color-danger)}.row-2[data-v-98173b64]{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px}.map-wrap[data-v-98173b64]{margin:12px 0 16px}.hint[data-v-98173b64]{font-size:12px;color:var(--ion-color-medium);margin:4px 0 8px}.map-holder[data-v-98173b64]{position:relative;height:32vh;border-radius:12px;overflow:hidden}#add-map[data-v-98173b64]{position:absolute;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .18s ease-out}#add-map.fade-in[data-v-98173b64]{opacity:1}.map-skeleton[data-v-98173b64]{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:12px}.img-preview-wrap[data-v-98173b64]{padding:0 16px 16px}.img-preview[data-v-98173b64]{max-width:100%;display:block;border-radius:8px}.mr-2[data-v-98173b64]{margin-right:8px}@keyframes pop-98173b64{0%{transform:translateZ(0) scale(.85)}70%{transform:translateZ(0) scale(1.08)}to{transform:translateZ(0) scale(1)}}.marker-pop[data-v-98173b64]{animation:pop-98173b64 .22s ease-out}#add-map[data-v-98173b64]{cursor:crosshair}.opening-hours-list[data-v-98173b64]{margin-top:4px}.opening-hours-item[data-v-98173b64]{display:flex;align-items:center}.day-label[data-v-98173b64]{min-width:50px;font-weight:600}.time-inputs[data-v-98173b64]{display:flex;align-items:center;gap:6px;margin-left:auto}.time-field[data-v-98173b64]{max-width:110px}.closed-label[data-v-98173b64]{margin-left:auto;color:var(--ion-color-medium);font-size:14px}\n",document.head.appendChild(a);const re={slot:"label"},ue={slot:"label"},de={key:0,class:"img-preview-wrap"},se=["src"],ce={slot:"label"},me={class:"row-2"},pe={slot:"label"},ve={slot:"label"},ge={class:"map-wrap"},fe={class:"hint"},be={class:"map-holder"},he={style:{margin:"6px 0 0 16px",padding:"0","font-size":"14px"}},_e={key:2},ye={key:0,class:"closed-label"},we={key:1,class:"time-inputs"},Pe={key:1},ke=5242880;e("default",oe(l({__name:"AddPlaceView",setup(e){const a=n(),l=t(()=>!!a.params.id),oe=o(null),xe=25.0343,Ve=121.5645;let Ue=null,Le=null;const Ie=o(!0),Ce=o(!1),{awardAndCelebrate:$e}=te(),{notifyEvent:Ee}=ie(),je={mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",sun:"Sun"},Ae=o(!1),Se=o(!1),Me=f(),Te=o(!1),ze=o([]),isPrivileged=e=>"admin"===e||"contributor"===e,De=o(null),Oe=o({name:"",type_id:null,lat:xe,lng:Ve,address:null,image:null,description:"",phone:"",instagram:"",line_id:"",price_range:"",opening_hours:{mon:{active:!1,open:"09:00",close:"18:00"},tue:{active:!1,open:"09:00",close:"18:00"},wed:{active:!1,open:"09:00",close:"18:00"},thu:{active:!1,open:"09:00",close:"18:00"},fri:{active:!1,open:"09:00",close:"18:00"},sat:{active:!1,open:"09:00",close:"18:00"},sun:{active:!1,open:"09:00",close:"18:00"}}}),Re=o(!1),qe=o({open:!1,message:"",color:"primary"}),Be=t(()=>!(!Oe.value.name||!Oe.value.type_id||null===Oe.value.lat||null===Oe.value.lng||!Oe.value.image&&!Ze.value));async function resizeImageFromWebPath(e,a,l=1200,t=.8){const n=await fetch(e),o=await n.blob(),i=await(async()=>{try{return await createImageBitmap(o)}catch{return new Promise((e,a)=>{const l=new Image;l.onload=()=>{const t=document.createElement("canvas");t.width=l.naturalWidth,t.height=l.naturalHeight,t.getContext("2d").drawImage(l,0,0),t.toBlob(l=>{if(!l)return a(new Error("toBlob failed"));createImageBitmap(l).then(e).catch(a)})},l.onerror=a,l.src=URL.createObjectURL(o)})}})(),r=i.width,u=i.height,d=Math.min(1,l/Math.max(r,u)),s=Math.round(r*d),c=Math.round(u*d),m=document.createElement("canvas");m.width=s,m.height=c,m.getContext("2d").drawImage(i,0,0,s,c);const p=await new Promise((e,a)=>m.toBlob(l=>l?e(l):a(new Error("Compression failed")),"image/jpeg",t));return new File([p],a,{type:"image/jpeg"})}const Fe=o([]),We=o(!1);let He;i(()=>({name:Oe.value.name,lat:Oe.value.lat,lng:Oe.value.lng}),e=>{clearTimeout(He),He=window.setTimeout(async()=>{const{name:t,lat:n,lng:o}=e;if(!t||!n||!o||t.trim().length<4)return void(Fe.value=[]);We.value=!0;const{data:i,error:r}=await u.rpc("find_nearby_similar_locations",{p_lat:n,p_lng:o,p_name:t.trim(),p_exclude_id:l.value?Number(a.params.id):null});Fe.value=!r&&Array.isArray(i)?i:[],We.value=!1},600)},{deep:!1});const Ne=t(()=>{if(!Fe.value.length)return null;const e=Fe.value[0];return e.distance_meters<=20&&e.name_similarity>=.75?"high":e.distance_meters<=50&&e.name_similarity>=.6?"medium":"low"}),makeSafeBase=()=>{var e;const a=null===(e=Oe.value.name)||void 0===e?void 0:e.trim().replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-_]/g,"").toLowerCase();return a&&a.length?a:"place"},Ge=o(null),Ze=o(null),Ke=o(!1),setPreview=e=>{Ge.value&&URL.revokeObjectURL(Ge.value),Ge.value=URL.createObjectURL(e),Ze.value=e},takePicture=async()=>{try{const a=await ee.getPhoto({resultType:le.Uri,source:ae.Camera,quality:85,allowEditing:!1});if(!a.webPath)return;const l=makeSafeBase();try{const e=await resizeImageFromWebPath(a.webPath,`image-${l}.jpg`,1200,.8);if(e.size>ke)return void(qe.value={open:!0,message:"Image still too large after compression.",color:"danger"});setPreview(e)}catch(e){qe.value={open:!0,message:(null==e?void 0:e.message)||"Could not process image.",color:"danger"}}}catch{}},uploadFromGallery=async()=>{try{const e=await ee.getPhoto({resultType:le.Uri,source:ae.Photos,quality:85,allowEditing:!1});if(!e.webPath)return;const a=makeSafeBase(),l=await resizeImageFromWebPath(e.webPath,`image-${a}.jpg`,1200,.8);if(l.size>ke)return void(qe.value={open:!0,message:"Image still too large after compression.",color:"danger"});setPreview(l)}catch{}};let Je=null,Ye=null,Qe=null,Xe=null;const updatePinColor=()=>{var e;const a=getComputedStyle(document.documentElement).getPropertyValue("--ion-color-carrot").trim()||"#d8620d";Le&&null!==(e=Ye)&&void 0!==e&&e.PinElement&&(Le=new Ye.PinElement({background:a,borderColor:"#ffffff",glyphColor:"#ffffff",scale:1.2}),Ue&&(Ue.content=Le.element))},ea=o(null),onAddressConfirm=async()=>{var e,a,l;const t=null===(e=Oe.value.address)||void 0===e?void 0:e.trim();if(!t||t.length<8)return;oe.value="address";const n=await async function geocodeAddress(e){return Ce.value&&e?(ea.value||(ea.value=new google.maps.Geocoder),new Promise(a=>{ea.value.geocode({address:e,region:"TW",componentRestrictions:{country:"TW"}},(e,l)=>{if("OK"===l&&null!=e&&e[0]){const l=e[0].geometry.location;a({lat:l.lat(),lng:l.lng()})}else console.warn("Address geocode failed:",l),a(null)})})):null}(t);if(!n)return;const{lat:o,lng:i}=n;Oe.value.lat=o,Oe.value.lng=i,null===(a=Je)||void 0===a||a.panTo({lat:o,lng:i}),null===(l=Je)||void 0===l||l.setZoom(16),Ue&&(Ue.position={lat:o,lng:i}),oe.value=null};async function reverseGeocode(e,a){return Ce.value?(ea.value||(ea.value=new google.maps.Geocoder),new Promise(l=>{ea.value.geocode({location:{lat:e,lng:a}},(e,a)=>{"OK"===a&&null!=e&&e[0]?l(e[0].formatted_address):(console.warn("Geocode failed:",a),l(null))})})):null}const normalizeOpeningHours=()=>{if(!Se.value)return null;const e=Oe.value.opening_hours;return Object.values(e).some(e=>e.active&&e.open&&e.close)?e:null},submitPlace=async()=>{if(!Re.value)if(Oe.value.image||Ze.value){Re.value=!0;try{var e,t;const{data:{user:o}}=await u.auth.getUser();if(!o)throw new Error("You must be logged in.");De.value;const i=isPrivileged(De.value);if(l.value&&Ze.value&&Oe.value.image){const e=Oe.value.image.split("/storage/v1/object/public/location-image/")[1];e&&await u.storage.from("location-image").remove([e])}Ze.value&&(Oe.value.image=await(async e=>{Ke.value=!0;try{const{data:{user:a}}=await u.auth.getUser();if(!a)throw new Error("You must be logged in.");const l=makeSafeBase(),t=Math.random().toString(36).slice(2,8),n=`${a.id}/${l}/${Date.now()}_${t}.jpg`,{error:o}=await u.storage.from("location-image").upload(n,e,{cacheControl:"3600",upsert:!1,contentType:"image/jpeg"});if(o)throw o;const{data:i}=u.storage.from("location-image").getPublicUrl(n);if(null==i||!i.publicUrl)throw new Error("Could not get public URL.");return i.publicUrl}finally{Ke.value=!1}})(Ze.value));const r={name:Oe.value.name.trim(),lat:Oe.value.lat,lng:Oe.value.lng,type_id:Oe.value.type_id,image:String(Oe.value.image||"").trim(),address:(null===(e=Oe.value.address)||void 0===e?void 0:e.trim())||null,description:(null===(t=Oe.value.description)||void 0===t?void 0:t.trim())||null,phone:Oe.value.phone||null,instagram:Oe.value.instagram||null,line_id:Oe.value.line_id||null,price_range:Oe.value.price_range||null,opening_hours:normalizeOpeningHours(),created_by:o.id,approved:i,approved_by:i?o.id:null,approved_at:i?(new Date).toISOString():null,updated_by:o.id,updated_at:(new Date).toISOString()};if(l.value){i||(delete r.approved,delete r.approved_by,delete r.approved_at);const{error:e}=await u.from("locations").update(r).eq("id",a.params.id);if(e)throw e;return qe.value={open:!0,message:"Place updated!",color:"success"},void setTimeout(()=>Me.replace(`/place/${a.params.id}`),500)}const{data:d,error:s}=await u.from("locations").insert([r]).select("id").single();if(s)throw s;if(qe.value={open:!0,message:i?"âœ… Place published!":"âœ… Place submitted and awaiting approval.",color:"success"},i){var n;const e=ze.value.find(e=>e.id===Oe.value.type_id),a=(null==e?void 0:e.name)||"Halal Place";await Ee("new_place",`ðŸ•Œ New ${a} Added!`,`${Oe.value.name} (${a})\nLat: ${Oe.value.lat}, Lng: ${Oe.value.lng}`,null!==(n=Oe.value.image)&&void 0!==n?n:void 0,{id:d.id,lat:Oe.value.lat,lng:Oe.value.lng,isNative:!0})}await $e("add_place",1e4),await ne.log("add_place_success",{name:Oe.value.name,address:Oe.value.address,lat:Oe.value.lat,lng:Oe.value.lng}),setTimeout(()=>{Me.replace(i?`/explore?focus=${d.id}`:"/explore")},500),Ge.value&&URL.revokeObjectURL(Ge.value),Ge.value=null,Ze.value=null}catch(o){qe.value={open:!0,message:o.message||"Failed to save.",color:"danger"}}finally{Re.value=!1}}else qe.value={open:!0,message:"Please select an image.",color:"warning"}};return r(async()=>{if(await(async()=>{var e;const{data:{user:a}}=await u.auth.getUser();if(!a)return De.value=null,void(Te.value=!0);const{data:l,error:t}=await u.from("user_roles").select("role").eq("user_id",a.id).single();De.value=t?"user":null!==(e=null==l?void 0:l.role)&&void 0!==e?e:"user",Te.value=!0})(),await(async()=>{const{data:e,error:a}=await u.from("location_types").select("id, name").order("name",{ascending:!0});!a&&e&&(ze.value=e)})(),l.value){const{data:e,error:t}=await u.from("locations").select("\n    id,\n    name,\n    lat,\n    lng,\n    address,\n    description,\n    image,\n    type_id,\n    phone,\n    instagram,\n    line_id,\n    price_range,\n    opening_hours\n  ").eq("id",a.params.id).maybeSingle();!t&&e&&(Oe.value={name:e.name,type_id:e.type_id,lat:e.lat,lng:e.lng,address:e.address,image:e.image,description:e.description||"",phone:e.phone||"",instagram:e.instagram||"",line_id:e.line_id||"",price_range:e.price_range||"",opening_hours:e.opening_hours||Oe.value.opening_hours},Ge.value=e.image||null),l.value&&null!=e&&e.opening_hours&&(Se.value=!0)}if(!l.value&&Te.value&&De.value&&await(async()=>{if("web"!==v.getPlatform())try{"granted"!==(await g.checkPermissions()).location&&await g.requestPermissions();const e=await g.getCurrentPosition({enableHighAccuracy:!0,timeout:5e3}),{latitude:a,longitude:l}=e.coords;Oe.value.lat=a,Oe.value.lng=l;const t=await reverseGeocode(a,l);return void(t&&(Oe.value.address=t))}catch(e){return void console.warn("Native geolocation failed, falling back to default",e)}return new Promise(e=>{navigator.geolocation.getCurrentPosition(a=>{const{latitude:l,longitude:t}=a.coords;Oe.value.lat=l,Oe.value.lng=t,e()},a=>{console.warn("Web geolocation failed or denied",a),e()},{enableHighAccuracy:!0,timeout:5e3})})})(),await(async()=>{Ie.value=!0;const[{Map:e},a]=await Promise.all([p.importLibrary("maps"),p.importLibrary("marker")]);null!=a&&a.PinElement&&null!=a&&a.AdvancedMarkerElement||console.error("Advanced markers not available. Check Maps JS API version/libraries."),Ye=a,Je=new e(document.getElementById("add-map"),{center:{lat:Oe.value.lat,lng:Oe.value.lng},zoom:14,disableDefaultUI:!0,mapId:"a40f1ec0ad0afbbb12694f19",gestureHandling:"greedy"}),Le=new Ye.PinElement({background:getComputedStyle(document.documentElement).getPropertyValue("--ion-color-carrot").trim()||"#d8620d",borderColor:"#ffffff",glyphColor:"#ffffff",scale:1.2}),Ue=new Ye.AdvancedMarkerElement({map:Je,position:{lat:Oe.value.lat,lng:Oe.value.lng},content:Le.element,zIndex:10});const onReady=()=>{Ce.value=!0,requestAnimationFrame(()=>{Ie.value=!1})};google.maps.event.addListenerOnce(Je,"idle",onReady),google.maps.event.addListenerOnce(Je,"tilesloaded",onReady),setTimeout(()=>{Ce.value||(onReady(),console.warn("Map ready fallback timeout used"))},3e3);let l=!1;Qe=Je.addListener("click",async e=>{var a;if(!e.latLng)return;oe.value="map";const t=e.latLng.lat(),n=e.latLng.lng();var o,i;Oe.value.lat=t,Oe.value.lng=n,Ue?Ue.position={lat:t,lng:n}:Ue=new Ye.AdvancedMarkerElement({map:Je,position:{lat:t,lng:n},content:null!==(o=null===(i=Le)||void 0===i?void 0:i.element)&&void 0!==o?o:void 0,zIndex:10}),Je.panTo({lat:t,lng:n}),null!==(a=Le)&&void 0!==a&&a.element&&(Le.element.classList.add("marker-pop"),setTimeout(()=>Le.element.classList.remove("marker-pop"),220)),l||(Je.setZoom(16),l=!0);const r=await reverseGeocode(t,n);r&&(Oe.value.address=r),oe.value=null})})(),updatePinColor(),await new Promise(e=>{const stop=i(Ce,a=>{a&&(stop(),e())})}),!Oe.value.address&&Oe.value.lat&&Oe.value.lng){const e=await reverseGeocode(Oe.value.lat,Oe.value.lng);e&&(Oe.value.address=e)}Xe=new MutationObserver(updatePinColor),Xe.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]})}),d(()=>{Ge.value&&URL.revokeObjectURL(Ge.value),Qe&&(Qe.remove(),Qe=null),Xe&&(Xe.disconnect(),Xe=null),Ue=null,Le=null,Je=null}),(e,a)=>(b(),s(m(X),null,{default:c(()=>[h(m(_),null,{default:c(()=>[h(m(y),null,{default:c(()=>[h(m(w),{slot:"start"},{default:c(()=>[h(m(P),{"default-href":"/explore"})]),_:1}),h(m(k),null,{default:c(()=>[x(V(l.value?e.$t("addPlace.editTitle"):e.$t("addPlace.title")),1)]),_:1})]),_:1})]),_:1}),h(m(U),{class:"ion-padding"},{default:c(()=>[Te.value&&!De.value?(b(),s(m(I),{key:0},{default:c(()=>[h(m(C),null,{default:c(()=>a[15]||(a[15]=[x(" Please login to submit a place. ",-1)])),_:1,__:[15]})]),_:1})):(b(),L("form",{key:1,onSubmit:$(submitPlace,["prevent"]),class:"form"},[h(m(A),null,{default:c(()=>[h(m(S),{modelValue:Oe.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>Oe.value.name=e),"label-placement":"stacked",required:"",placeholder:e.$t("addPlace.namePlaceholder")},{default:c(()=>[j("div",re,[x(V(e.$t("addPlace.nameLabel"))+" ",1),h(m(M),{color:"danger"},{default:c(()=>a[16]||(a[16]=[x("*",-1)])),_:1,__:[16]})])]),_:1},8,["modelValue","placeholder"])]),_:1}),h(m(A),null,{default:c(()=>[h(m(T),{modelValue:Oe.value.type_id,"onUpdate:modelValue":a[1]||(a[1]=e=>Oe.value.type_id=e),modelModifiers:{number:!0},"label-placement":"stacked",interface:"popover",placeholder:e.$t("addPlace.typePlaceholder"),required:""},{default:c(()=>[j("div",ue,[x(V(e.$t("addPlace.typeLabel"))+" ",1),h(m(M),{color:"danger"},{default:c(()=>a[17]||(a[17]=[x("*",-1)])),_:1,__:[17]})]),(b(!0),L(z,null,D(ze.value,e=>(b(),s(m(O),{key:e.id,value:e.id},{default:c(()=>[x(V(e.name),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),h(m(A),null,{default:c(()=>[h(m(R),null,{default:c(()=>[x(V(e.$t("addPlace.imageLabel"))+" ",1),h(m(M),{color:"danger"},{default:c(()=>a[18]||(a[18]=[x("*",-1)])),_:1,__:[18]})]),_:1}),h(m(w),{slot:"end"},{default:c(()=>[h(m(q),{onClick:takePicture,fill:"clear",disabled:Ke.value},{default:c(()=>[h(m(B),{icon:m(F)},null,8,["icon"])]),_:1},8,["disabled"]),h(m(q),{onClick:uploadFromGallery,fill:"clear",disabled:Ke.value},{default:c(()=>[h(m(B),{icon:m(W)},null,8,["icon"])]),_:1},8,["disabled"])]),_:1})]),_:1}),Ge.value?(b(),L("div",de,[j("img",{src:Ge.value,alt:"Preview",class:"img-preview"},null,8,se)])):E("",!0),h(m(A),null,{default:c(()=>[h(m(S),{modelValue:Oe.value.address,"onUpdate:modelValue":a[2]||(a[2]=e=>Oe.value.address=e),"label-placement":"stacked",placeholder:e.$t("addPlace.addressPlaceholder"),required:"",onIonBlur:onAddressConfirm,onIonChange:onAddressConfirm,onKeyup:H(onAddressConfirm,["enter"])},{default:c(()=>[j("div",ce,[x(V(e.$t("addPlace.addressLabel"))+" ",1),h(m(M),{color:"danger"},{default:c(()=>a[19]||(a[19]=[x("*",-1)])),_:1,__:[19]})])]),_:1},8,["modelValue","placeholder"])]),_:1}),j("div",me,[h(m(A),null,{default:c(()=>[h(m(S),{modelValue:Oe.value.lat,"onUpdate:modelValue":a[3]||(a[3]=e=>Oe.value.lat=e),modelModifiers:{number:!0},type:"number",step:"any","label-placement":"stacked",required:"",readonly:""},{default:c(()=>[j("div",pe,[x(V(e.$t("addPlace.latLabel"))+" ",1),h(m(M),{color:"danger"},{default:c(()=>a[20]||(a[20]=[x("*",-1)])),_:1,__:[20]})])]),_:1},8,["modelValue"])]),_:1}),h(m(A),null,{default:c(()=>[h(m(S),{modelValue:Oe.value.lng,"onUpdate:modelValue":a[4]||(a[4]=e=>Oe.value.lng=e),modelModifiers:{number:!0},type:"number",step:"any","label-placement":"stacked",required:"",readonly:""},{default:c(()=>[j("div",ve,[x(V(e.$t("addPlace.lngLabel"))+" ",1),h(m(M),{color:"danger"},{default:c(()=>a[21]||(a[21]=[x("*",-1)])),_:1,__:[21]})])]),_:1},8,["modelValue"])]),_:1})]),j("div",ge,[j("div",fe,V(e.$t("addPlace.mapHint")),1),j("div",be,[j("div",{id:"add-map",class:N({"fade-in":Ce.value})},null,2),Ie.value?(b(),s(m(G),{key:0,animated:"",class:"map-skeleton"})):E("",!0)])]),Ne.value?(b(),s(m(I),{key:1,color:"high"===Ne.value?"danger":"warning",class:"ion-margin-top",style:{margin:"12px 0 16px"}},{default:c(()=>[h(m(C),null,{default:c(()=>[j("strong",null," âš ï¸ "+V("high"===Ne.value?"Very likely duplicate nearby":"Similar place nearby detected"),1),j("ul",he,[(b(!0),L(z,null,D(Fe.value.slice(0,3),e=>(b(),L("li",{key:e.id},V(e.name)+" Â· "+V(e.distance_meters)+" m ",1))),128))]),a[22]||(a[22]=j("small",{style:{opacity:"0.8"}}," Verify if this is a different branch, floor, or vendor. ",-1))]),_:1,__:[22]})]),_:1},8,["color"])):E("",!0),h(m(q),{fill:"outline",size:"small",onClick:a[5]||(a[5]=e=>Ae.value=!Ae.value),style:{"margin-bottom":"12px"}},{default:c(()=>[x(V(Ae.value?"Hide Details":"More Details"),1)]),_:1}),Ae.value?(b(),L("div",_e,[a[24]||(a[24]=j("p",{style:{"margin-top":"20px","font-weight":"600"}},"Description",-1)),h(m(A),null,{default:c(()=>[h(m(Z),{modelValue:Oe.value.description,"onUpdate:modelValue":a[6]||(a[6]=e=>Oe.value.description=e),label:"Description","label-placement":"stacked",placeholder:"Describe this place (halal status, specialties, notes, etc.)","auto-grow":"",maxlength:1e3,counter:""},null,8,["modelValue"])]),_:1}),a[25]||(a[25]=j("p",{style:{"margin-top":"20px","font-weight":"600"}},"Contact Information",-1)),h(m(A),null,{default:c(()=>[h(m(S),{modelValue:Oe.value.phone,"onUpdate:modelValue":a[7]||(a[7]=e=>Oe.value.phone=e),label:"Phone / WhatsApp","label-placement":"stacked",placeholder:"+886 900 000 000"},null,8,["modelValue"])]),_:1}),h(m(A),null,{default:c(()=>[h(m(S),{modelValue:Oe.value.instagram,"onUpdate:modelValue":a[8]||(a[8]=e=>Oe.value.instagram=e),label:"Instagram","label-placement":"stacked",placeholder:"@username"},null,8,["modelValue"])]),_:1}),h(m(A),null,{default:c(()=>[h(m(S),{modelValue:Oe.value.line_id,"onUpdate:modelValue":a[9]||(a[9]=e=>Oe.value.line_id=e),label:"LINE ID","label-placement":"stacked",placeholder:"yourlineid"},null,8,["modelValue"])]),_:1}),a[26]||(a[26]=j("p",{style:{"margin-top":"20px","font-weight":"600"}},"Price Range",-1)),h(m(A),null,{default:c(()=>[h(m(S),{modelValue:Oe.value.price_range,"onUpdate:modelValue":a[10]||(a[10]=e=>Oe.value.price_range=e),label:"Price Range","label-placement":"stacked",placeholder:"NTD 100â€“300"},null,8,["modelValue"])]),_:1}),a[27]||(a[27]=j("p",{style:{"margin-top":"20px","font-weight":"600"}},"Opening Hours",-1)),h(m(K),{class:"opening-hours-list"},{default:c(()=>[(b(),L(z,null,D(je,(e,l)=>h(m(A),{key:l,lines:"full",class:"opening-hours-item"},{default:c(()=>[h(m(J),{modelValue:Oe.value.opening_hours[l].active,"onUpdate:modelValue":e=>Oe.value.opening_hours[l].active=e,slot:"start",onIonChange:a[11]||(a[11]=e=>Se.value=!0)},null,8,["modelValue","onUpdate:modelValue"]),h(m(R),{class:"day-label"},{default:c(()=>[x(V(e),1)]),_:2},1024),Oe.value.opening_hours[l].active?(b(),L("div",we,[h(m(S),{modelValue:Oe.value.opening_hours[l].open,"onUpdate:modelValue":e=>Oe.value.opening_hours[l].open=e,type:"time",class:"time-field",onIonInput:a[12]||(a[12]=e=>Se.value=!0)},null,8,["modelValue","onUpdate:modelValue"]),a[23]||(a[23]=j("span",{style:{margin:"0 4px"}},"-",-1)),h(m(S),{modelValue:Oe.value.opening_hours[l].close,"onUpdate:modelValue":e=>Oe.value.opening_hours[l].close=e,type:"time",class:"time-field",onIonInput:a[13]||(a[13]=e=>Se.value=!0)},null,8,["modelValue","onUpdate:modelValue"])])):(b(),L("span",ye," Closed "))]),_:2},1024)),64))]),_:1})])):E("",!0),Te.value&&De.value&&!isPrivileged(De.value)?(b(),s(m(I),{key:3,color:"light"},{default:c(()=>[h(m(C),{style:{"font-size":"14px"}},{default:c(()=>a[28]||(a[28]=[x(" ðŸ•µï¸ Submissions will be reviewed before appearing publicly. ",-1)])),_:1,__:[28]})]),_:1})):E("",!0),h(m(q),{type:"submit",expand:"block",disabled:Re.value||!Be.value},{default:c(()=>[Re.value?(b(),s(m(Y),{key:0,name:"lines-small",class:"mr-2"})):(b(),L("span",Pe,V(l.value?e.$t("addPlace.updateBtn"):e.$t("addPlace.saveBtn")),1))]),_:1},8,["disabled"])],32)),h(m(Q),{"is-open":qe.value.open,message:qe.value.message,color:qe.value.color,duration:2200,onDidDismiss:a[14]||(a[14]=e=>qe.value.open=!1)},null,8,["is-open","message","color"])]),_:1})]),_:1}))}}),[["__scopeId","data-v-98173b64"]]))}}});
