System.register(["./index-legacy-DryGZUwD.js","./html5-qrcode-legacy-D5DtuMLO.js"],function(a,t){"use strict";var e,n,i,o,l,s,r,c,d,u,p,f,g,v,m,b,h,x,w,y,k,M,q,_,C,E;return{setters:[a=>{e=a.d,n=a.j,i=a.b,o=a.i,l=a.k,s=a.X,r=a.H,c=a.J,d=a.L,u=a._,p=a.r,f=a.ca,g=a.bR,v=a.a6,m=a.C,b=a.c,h=a.w,x=a.u,w=a.B,y=a.e,k=a.O,M=a.ad,q=a.S,_=a.t,C=a.ba,E=a.y},null],execute:function(){var t=document.createElement("style");t.textContent='.compass-wrapper[data-v-40212f8c]{position:relative;width:280px;height:280px;border-radius:50%;background:radial-gradient(circle,rgba(255,255,255,.05),rgba(0,0,0,.4));border:2px solid rgba(255,255,255,.1);display:flex;align-items:center;justify-content:center}.dial[data-v-40212f8c]{position:absolute;width:100%;height:100%;transition:transform .6s cubic-bezier(.1,0,.2,1)}.dial[data-v-40212f8c]:not([style*="rotate(0deg)"]){transition:transform .1s linear}.kaaba-arm[data-v-40212f8c]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;z-index:5}.kaaba[data-v-40212f8c]{transform:translateY(20px);font-size:28px}.tick[data-v-40212f8c]{position:absolute;top:10px;left:calc(50% - 1px);width:2px;height:15px;background:#fff;transform-origin:center 130px}.label[data-v-40212f8c]{position:absolute;font-weight:700;color:#fff}.n[data-v-40212f8c]{top:30px;left:50%;transform:translate(-50%)}.e[data-v-40212f8c]{right:30px;top:50%;transform:translateY(-50%)}.s[data-v-40212f8c]{bottom:30px;left:50%;transform:translate(-50%)}.w[data-v-40212f8c]{left:30px;top:50%;transform:translateY(-50%)}.needle[data-v-40212f8c]{position:absolute;top:20px;width:4px;height:40px;background:#ff3b30;border-radius:2px;z-index:10}.needle.aligned[data-v-40212f8c]{background:#4cd964;box-shadow:0 0 15px rgba(76,217,100,.6);transform:scaleY(1.1);transition:all .2s ease}.qibla-page[data-v-7e4532a6]{display:flex;justify-content:center}.center[data-v-7e4532a6]{text-align:center;margin-top:30%;color:var(--ion-color-medium)}.compass-container[data-v-7e4532a6]{display:flex;flex-direction:column;align-items:center;margin-top:40px}.info[data-v-7e4532a6]{margin-top:12px;text-align:center}.aligned-text[data-v-7e4532a6]{margin-top:10px;color:var(--ion-color-carrot);font-weight:600;letter-spacing:.4px}.loading-row[data-v-7e4532a6]{display:flex;align-items:center;justify-content:center;gap:8px;color:var(--ion-color-medium);font-size:14px;margin-top:8px}\n',document.head.appendChild(t);const P={class:"compass-wrapper"},j=e({__name:"CompassDial",props:{rotation:{},qibla:{},aligned:{type:Boolean}},setup:a=>(a,t)=>(i(),n("div",P,[o("div",{class:"dial",style:s({transform:`rotate(${-a.rotation}deg)`})},[null!==a.qibla?(i(),n("div",{key:0,class:"kaaba-arm",style:s({transform:`rotate(${a.qibla}deg)`})},t[0]||(t[0]=[o("div",{class:"kaaba"},"ðŸ•‹",-1)]),4)):l("",!0),(i(),n(r,null,c(12,a=>o("span",{key:a,class:"tick major",style:s({transform:`rotate(${30*(a-1)}deg)`})},null,4)),64)),t[1]||(t[1]=o("span",{class:"label n"},"N",-1)),t[2]||(t[2]=o("span",{class:"label e"},"E",-1)),t[3]||(t[3]=o("span",{class:"label s"},"S",-1)),t[4]||(t[4]=o("span",{class:"label w"},"W",-1))],4),o("div",{class:d(["needle",{aligned:a.aligned}])},null,2),t[5]||(t[5]=o("div",{class:"center-dot"},null,-1))]))}),Q=u(j,[["__scopeId","data-v-40212f8c"]]),S=.12;function shortestAngleDiff(a,t){return((t-a)%360+540)%360-180}function useQiblaCompass(){const a=p(!1),t=p(!1),e=p(0),n=p(0),i=p(!1);let o=null,l=!1,s=0,r=0,c=0,d=0;function cleanup(){o&&(window.removeEventListener("deviceorientation",o),window.removeEventListener("deviceorientationabsolute",o),o=null)}return f(cleanup),g(cleanup),{loading:a,hasCompass:t,qiblaBearing:e,compassRotation:n,aligned:i,start:async function start(u,p){if(o&&cleanup(),a.value=!0,l=!1,e.value=function calculateQiblaBearing(a,t){const toRad=a=>a*Math.PI/180,e=toRad(a),n=toRad(21.422487),i=toRad(39.826206-t),o=Math.sin(i),l=Math.cos(e)*Math.tan(n)-Math.sin(e)*Math.cos(i);return(180*Math.atan2(o,l)/Math.PI+360)%360}(u,p),!(await async function requestPermission(){const a=window.DeviceOrientationEvent;if("function"==typeof(null==a?void 0:a.requestPermission))try{return"granted"===await a.requestPermission()}catch(t){return!1}return!0}()))return void(a.value=!1);o=o=>{let u=null;if(null!=o.webkitCompassHeading?u=o.webkitCompassHeading:null!=o.alpha&&(u=360-o.alpha),null===u)return;const p=u*Math.PI/180,f=Math.cos(p),g=Math.sin(p);if(!l)return s=f,r=g,c=u,d=u,l=!0,a.value=!1,void(t.value=!0);s=.88*s+f*S,r=.88*r+g*S;const v=(180*Math.atan2(r,s)/Math.PI+360)%360,m=shortestAngleDiff(d,v);c+=m,d=v,n.value=c;const b=Math.abs(shortestAngleDiff(v,e.value));i.value=b<=5};const f="ondeviceorientationabsolute"in window?"deviceorientationabsolute":"deviceorientation";o&&window.addEventListener(f,o,!0)}}}const B={class:"compass-container"},D={class:"info"},I={key:0,class:"bearing"},z={key:1,class:"loading-row"},A={key:2,class:"aligned-text"};a("default",u(e({__name:"QiblaFinderView",setup(a){w();const{loading:t,hasCompass:e,qiblaBearing:s,compassRotation:r,aligned:c,start:start}=useQiblaCompass(),d=v(()=>{const a=s.value;if(null==a)return"";const t=Math.round(a);return 0===t?"0Â° N":t<90?`${t}Â° NE`:90===t?"90Â° E":t<180?180-t+"Â° SE":180===t?"180Â° S":t<270?t-180+"Â° SW":270===t?"270Â° W":360-t+"Â° NW"});return m(()=>{t.value=!0,navigator.geolocation.getCurrentPosition(a=>{start(a.coords.latitude,a.coords.longitude)},a=>{console.error("GPS Error:",a),t.value=!1},{enableHighAccuracy:!1,timeout:5e3,maximumAge:6e4})}),(a,u)=>(i(),b(x(E),null,{default:h(()=>[y(x(k),null,{default:h(()=>[y(M,{title:"Find Qibla",icon:"none",showBack:!0})]),_:1}),y(x(q),{class:"ion-padding qibla-page"},{default:h(()=>[o("div",B,[y(Q,{rotation:x(e)?x(r):0,qibla:x(e)?x(s):null,aligned:x(c)&&x(e)},null,8,["rotation","qibla","aligned"]),o("div",D,[u[1]||(u[1]=o("h2",null,"Qibla Direction",-1)),x(e)&&!x(t)?(i(),n("p",I,_(x(s).toFixed(0))+"Â° â€¢ "+_(d.value)+" from True North ",1)):(i(),n("div",z,[y(x(C),{name:"crescent"}),u[0]||(u[0]=o("span",null,"Preparing compassâ€¦",-1))])),x(c)&&x(e)?(i(),n("p",A," You are facing Qibla ")):l("",!0)])])]),_:1})]),_:1}))}}),[["__scopeId","data-v-7e4532a6"]]))}}});
