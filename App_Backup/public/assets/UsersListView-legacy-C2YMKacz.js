System.register(["./index-legacy-DryGZUwD.js","./html5-qrcode-legacy-D5DtuMLO.js"],function(e,a){"use strict";var t,l,s,i,n,r,c,o,u,d,f,v,m,p,_,h,g,y,x,w,U,b,k,j,C,I,L,N,R,z,B,M,S,q;return{setters:[e=>{t=e.d,l=e.a2,s=e.a5,i=e.r,n=e.o,r=e.c,c=e.w,o=e.u,u=e.s,d=e.B,f=e.b,v=e.e,m=e.O,p=e.ad,_=e.aN,h=e.S,g=e.ae,y=e.af,x=e.ai,w=e.j,U=e.H,b=e.J,k=e.aj,j=e.L,C=e.ak,I=e.n,L=e.i,N=e.t,R=e.ag,z=e.p,B=e.cf,M=e.cg,S=e.y,q=e._},null],execute:function(){var a=document.createElement("style");a.textContent=".user-name[data-v-37f71cf2]{font-weight:600;margin:0 0 4px}.user-email[data-v-37f71cf2]{font-size:.9rem;color:var(--ion-color-medium);margin:0 0 6px}.user-meta[data-v-37f71cf2]{display:flex;align-items:center;gap:8px}.last-active[data-v-37f71cf2]{font-size:.8rem;color:var(--ion-color-medium)}.avatar-placeholder[data-v-37f71cf2]{width:40px;height:40px;border-radius:50%;background:var(--ion-color-light);display:flex;align-items:center;justify-content:center}.inactive[data-v-37f71cf2]{opacity:.6}\n",document.head.appendChild(a);const A=["src"],E={key:1,class:"avatar-placeholder"},F={class:"user-name"},H={class:"user-email"},J={class:"user-meta"},O={class:"last-active"};e("default",q(t({__name:"UsersListView",setup(e){l.extend(s);const a=d(),t=i([]),q=i(!1),V=i(!1);async function handleRefresh(e){await fetchUsers(!0),e.target.complete()}async function fetchUsers(e=!1){e&&(t.value=[],V.value=!1);const a=t.value.length,{data:l,error:s}=await u.rpc("get_admin_user_list",{p_limit:15,p_offset:a});s?console.error("‚ùå Failed to load users:",s):((!l||l.length<15)&&(V.value=!0),t.value.push(...l))}async function loadMore(e){q.value||V.value||(q.value=!0,await fetchUsers(),q.value=!1),e.target.complete()}return n(()=>fetchUsers(!0)),(e,s)=>(f(),r(o(S),null,{default:c(()=>[v(o(m),null,{default:c(()=>[v(p,{title:"Users",icon:o(_),showBack:!0},null,8,["icon"])]),_:1}),v(o(h),{class:"ion-padding"},{default:c(()=>[v(o(g),{slot:"fixed",onIonRefresh:handleRefresh},{default:c(()=>[v(o(y))]),_:1}),v(o(x),null,{default:c(()=>[(f(!0),w(U,null,b(t.value,e=>(f(),r(o(k),{key:e.user_id,button:"",detail:"",class:j({inactive:0===e.total_activities}),onClick:t=>function openUser(e){a.push(`/admin/users/${e.user_id}`)}(e)},{default:c(()=>[v(o(C),{slot:"start"},{default:c(()=>[e.avatar_url?(f(),w("img",{key:0,src:e.avatar_url,alt:"User Avatar"},null,8,A)):(f(),w("div",E," üë§ "))]),_:2},1024),v(o(I),null,{default:c(()=>{return[L("h2",F,N(e.display_name||e.email||"Unknown User"),1),L("p",H,N(e.email),1),L("div",J,[v(o(R),{color:e.total_activities>1e3?"warning":"primary"},{default:c(()=>[z(N(e.total_activities)+" activities ",1)]),_:2},1032,["color"]),L("span",O," Last active "+N((a=e.last_active,a?l(a).fromNow():"Never active")),1)])];var a}),_:2},1024)]),_:2},1032,["class","onClick"]))),128))]),_:1}),v(o(B),{threshold:"100px",onIonInfinite:loadMore,disabled:V.value},{default:c(()=>[v(o(M),{"loading-spinner":"bubbles","loading-text":"Loading users..."})]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),[["__scopeId","data-v-37f71cf2"]]))}}});
