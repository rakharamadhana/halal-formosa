import{cP as e,cW as t,cX as o,cY as n,cT as i,cS as r,cZ as s,c_ as a,c$ as d,d0 as l,d1 as c}from"./index-D9IhqqAc.js";import"./html5-qrcode-D_4nuB1t.js";
/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const u=new WeakMap,relocateInput=(e,t,o,n=0,i=!1)=>{u.has(e)!==o&&(o?addClone(e,t,n,i):removeClone(e,t))},addClone=(e,t,o,n=!1)=>{const i=t.parentNode,r=t.cloneNode(!1);r.classList.add("cloned-input"),r.tabIndex=-1,n&&(r.disabled=!0);const s="rtl"===e.ownerDocument.dir;if(s){const e=i.offsetWidth-t.offsetLeft-t.offsetWidth;r.style.insetInlineStart="".concat(e,"px")}else r.style.insetInlineStart="".concat(t.offsetLeft,"px");i.appendChild(r),u.set(e,r);const a=s?9999:-9999;e.style.pointerEvents="none",t.style.transform="translate3d(".concat(a,"px,").concat(o,"px,0) scale(0)")},removeClone=(e,t)=>{const o=u.get(e);o&&(u.delete(e),o.remove()),e.style.pointerEvents="",t.style.transform=""},f="input, textarea, [no-blur], [contenteditable]",calcScrollData=(e,t,o,n)=>{const i=e.top,r=e.bottom,s=t.top,a=s+15,d=Math.min(t.bottom,n-o)-50-r,l=a-i,c=Math.round(d<0?-d:l>0?-l:0),u=Math.min(c,i-s),f=Math.abs(u)/.3;return{scrollAmount:u,scrollDuration:Math.min(400,Math.max(150,f)),scrollPadding:o,inputSafeY:4-(i-a)}},m="$ionPaddingTimer",setScrollPadding=(e,t,o)=>{const n=e[m];n&&clearTimeout(n),t>0?e.style.setProperty("--keyboard-offset","".concat(t,"px")):e[m]=setTimeout(()=>{e.style.setProperty("--keyboard-offset","0px"),o&&o()},120)},setClearScrollPaddingListener=(e,t,o)=>{e.addEventListener("focusout",()=>{t&&setScrollPadding(t,0,o)},{once:!0})};let v=0;const p="data-ionic-skip-scroll-assist",setManualFocus=e=>{var t;if(document.activeElement===e)return;const o=e.getAttribute("id"),n=e.closest('label[for="'.concat(o,'"]')),i=null===(t=document.activeElement)||void 0===t?void 0:t.closest('label[for="'.concat(o,'"]'));null!==n&&n===i||(e.setAttribute(p,"true"),e.focus())},jsSetFocus=async(e,t,o,n,i,r,s=!1,a=0,u=!0)=>{if(!o&&!n)return;const f=((e,t,o,n)=>{var i;const r=null!==(i=e.closest("ion-item,[ion-item]"))&&void 0!==i?i:e;return calcScrollData(r.getBoundingClientRect(),t.getBoundingClientRect(),o,n)})(e,o||n,i,a);if(o&&Math.abs(f.scrollAmount)<4)return setManualFocus(t),void(r&&null!==o&&(setScrollPadding(o,v),setClearScrollPaddingListener(t,o,()=>v=0)));if(relocateInput(e,t,!0,f.inputSafeY,s),setManualFocus(t),d(()=>e.click()),r&&o&&(v=f.scrollPadding,setScrollPadding(o,v)),"undefined"!=typeof window){let n;const scrollContent=async()=>{void 0!==n&&clearTimeout(n),window.removeEventListener("ionKeyboardDidShow",doubleKeyboardEventListener),window.removeEventListener("ionKeyboardDidShow",scrollContent),o&&await c(o,0,f.scrollAmount,f.scrollDuration),relocateInput(e,t,!1,f.inputSafeY),document.activeElement===t&&setManualFocus(t),r&&setClearScrollPaddingListener(t,o,()=>v=0)},doubleKeyboardEventListener=()=>{window.removeEventListener("ionKeyboardDidShow",doubleKeyboardEventListener),window.addEventListener("ionKeyboardDidShow",scrollContent)};if(o){const e=await l(o),i=e.scrollHeight-e.clientHeight;if(u&&f.scrollAmount>i-e.scrollTop)return"password"===t.type?(f.scrollAmount+=50,window.addEventListener("ionKeyboardDidShow",doubleKeyboardEventListener)):window.addEventListener("ionKeyboardDidShow",scrollContent),void(n=setTimeout(scrollContent,1e3))}scrollContent()}},startInputShims=async(d,l)=>{if(void 0===e)return;const c="ios"===l,u="android"===l,m=d.getNumber("keyboardHeight",290),v=d.getBoolean("scrollAssist",!0),y=d.getBoolean("hideCaretOnScroll",c),h=d.getBoolean("inputBlurring",!1),w=d.getBoolean("scrollPadding",!0),b=Array.from(e.querySelectorAll("ion-input, ion-textarea")),E=new WeakMap,S=new WeakMap,g=await t.getResizeMode(),registerInput=async e=>{await new Promise(t=>i(e,t));const t=e.shadowRoot||e,d=t.querySelector("input")||t.querySelector("textarea"),l=r(e),c=l?null:e.closest("ion-footer");if(!d)return;if(l&&y&&!E.has(e)){const t=((e,t,i)=>{if(!i||!t)return()=>{};const scrollHideCaret=o=>{var n;(n=t)===n.getRootNode().activeElement&&relocateInput(e,t,o)},onBlur=()=>relocateInput(e,t,!1),hideCaret=()=>scrollHideCaret(!0),showCaret=()=>scrollHideCaret(!1);return o(i,"ionScrollStart",hideCaret),o(i,"ionScrollEnd",showCaret),t.addEventListener("blur",onBlur),()=>{n(i,"ionScrollStart",hideCaret),n(i,"ionScrollEnd",showCaret),t.removeEventListener("blur",onBlur)}})(e,d,l);E.set(e,t)}if(!("date"===d.type||"datetime-local"===d.type)&&(l||c)&&v&&!S.has(e)){const t=((e,t,o,n,i,r,d,l=!1)=>{const c=r&&(void 0===d||d.mode===s.None);let u=!1;const f=void 0!==a?a.innerHeight:0,keyboardShow=i=>{!1!==u?jsSetFocus(e,t,o,n,i.detail.keyboardHeight,c,l,f,!1):u=!0},focusOut=()=>{u=!1,null==a||a.removeEventListener("ionKeyboardDidShow",keyboardShow),e.removeEventListener("focusout",focusOut)},focusIn=async()=>{t.hasAttribute(p)?t.removeAttribute(p):(jsSetFocus(e,t,o,n,i,c,l,f),null==a||a.addEventListener("ionKeyboardDidShow",keyboardShow),e.addEventListener("focusout",focusOut))};return e.addEventListener("focusin",focusIn),()=>{e.removeEventListener("focusin",focusIn),null==a||a.removeEventListener("ionKeyboardDidShow",keyboardShow),e.removeEventListener("focusout",focusOut)}})(e,d,l,c,m,w,g,u);S.set(e,t)}};h&&(()=>{let e=!0,t=!1;const n=document,onScroll=()=>{t=!0},onFocusin=()=>{e=!0},onTouchend=o=>{if(t)return void(t=!1);const i=n.activeElement;if(!i)return;if(i.matches(f))return;const r=o.target;r!==i&&(r.matches(f)||r.closest(f)||(e=!1,setTimeout(()=>{e||i.blur()},50)))};o(n,"ionScrollStart",onScroll),n.addEventListener("focusin",onFocusin,!0),n.addEventListener("touchend",onTouchend,!1)})();for(const e of b)registerInput(e);e.addEventListener("ionInputDidLoad",e=>{registerInput(e.detail)}),e.addEventListener("ionInputDidUnload",e=>{(e=>{if(y){const t=E.get(e);t&&t(),E.delete(e)}if(v){const t=S.get(e);t&&t(),S.delete(e)}})(e.detail)})};export{startInputShims};
